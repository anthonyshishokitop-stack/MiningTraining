<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCC Annexure E</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        :root {
            --primary: #0d6efd;
            --primary-dark: #0b5ed7;
            --success: #198754;
            --warning: #fd7e14;
            --danger: #dc3545;
            --light-bg: rgba(255,255,255,0.96);
        }

        body {
            background: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.75)),
                        url('https://images.unsplash.com/photo-1581092580489-8e36c4f6d857?auto=format&fit=crop&q=80') center/cover no-repeat fixed;
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        #sidebar {
            background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);
            border-right: 1px solid #dee2e6;
            box-shadow: 2px 0 15px rgba(0,0,0,0.08);
            height: 100vh;
            overflow-y: auto;
            padding: 1.5rem 1rem;
        }

        .logo-title {
            font-weight: 800;
            color: var(--primary);
        }

        .module-card {
            background: white;
            border-radius: 12px;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.07);
            transition: all 0.25s ease;
            margin-bottom: 1rem;
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(13,110,253,0.15);
        }

        .module-card .card-body {
            padding: 1.2rem 1.35rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .icon-wrapper {
            width: 52px;
            height: 52px;
            border-radius: 10px;
            background: #eff6ff;
            color: #2563eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .module-card.advanced .icon-wrapper {
            background: #fff7ed;
            color: #c2410c;
        }

        .module-name {
            font-weight: 600;
            color: #1e293b;
            margin: 0;
            font-size: 1.05rem;
            line-height: 1.35;
            flex-grow: 1;
        }

        .progress-badge {
            font-size: 0.82rem;
            padding: 0.4em 0.75em;
            border-radius: 999px;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }

        .bg-success-soft { background: #dcfce7; color: #166534; }
        .bg-warning-soft { background: #fef3c7; color: #92400e; }

        #content-area {
            background: var(--light-bg);
            backdrop-filter: blur(8px);
        }

        .action-card {
            border-radius: 16px;
            transition: all 0.35s ease;
            cursor: pointer;
            border: 1px solid #e2e8f0;
        }

        .action-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 35px rgba(13,110,253,0.18);
        }

        .quiz-option {
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 1.1rem;
            margin-bottom: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: #f8f9fa;
        }

        @media (max-width: 991px) {
            #sidebar {
                height: 100vh !important;
                border-right: none;
            }
            #content-area {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                overflow: auto;
                display: none;
                z-index: 10;
            }
        }
    </style>
</head>
<body>

<div class="d-flex flex-lg-row flex-column vh-100 overflow-hidden">

    <!-- SIDEBAR -->
    <div class="col-lg-4 col-xl-3" id="sidebar">
        <div class="text-center mb-4 pb-3 border-bottom">
            <h2 class="logo-title mb-1">Mining Safety</h2>
            <p class="text-muted small mb-0">GCC Annexure E</p>
        </div>

        <input type="text" class="form-control mb-3" id="searchInput" placeholder="Search modules...">

        <div class="btn-group mb-4 w-100" role="group">
            <button type="button" class="btn btn-outline-primary active" data-filter="all">All</button>
            <button type="button" class="btn btn-outline-primary" data-filter="basic">Basic</button>
            <button type="button" class="btn btn-outline-primary" data-filter="advanced">Advanced</button>
        </div>

        <div id="moduleGrid"></div>

        <div class="card mt-4 border-0 shadow-sm">
            <div class="card-body text-center">
                <strong>Progress:</strong> <span id="completedCount">0</span>/24<br>
                <strong>Pass rate:</strong> <span id="overallPass">0%</span>
                <button class="btn btn-primary w-100 mt-3" id="dashboardBtn">
                    <i class="bi bi-speedometer2 me-2"></i> Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="flex-grow-1 p-4 p-lg-5 overflow-auto" id="content-area">

        <!-- Welcome -->
        <div id="welcomeScreen" class="text-center py-5">
            <h1 class="display-4 fw-bold text-primary mb-4">Mining Safety</h1>
            <p class="lead text-muted mb-5">24 Critical Competency Modules • MHSA Compliance</p>
            <img src="https://images.unsplash.com/photo-1617791160505-6f00504e3519?auto=format&fit=crop&q=80&w=1200" 
                 class="img-fluid rounded-4 shadow mb-5" style="max-height:420px; object-fit:cover;" alt="Mining">
        </div>

        <!-- Module View -->
        <div id="moduleView" class="d-none">
            <h2 class="text-primary text-center mb-5 fw-bold" id="moduleTitle"></h2>
            <div class="row g-4 justify-content-center">
                <div class="col-md-5">
                    <div class="action-card text-center p-5 bg-white shadow" id="watchVideo">
                        <i class="bi bi-play-circle-fill display-1 text-primary mb-3"></i>
                        <h4 class="fw-bold">Watch Training Video</h4>
                        <p class="text-muted">Review the required safety content</p>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="action-card text-center p-5 bg-white shadow" id="startQuiz">
                        <i class="bi bi-check2-circle display-1 text-success mb-3"></i>
                        <h4 class="fw-bold">Take Assessment</h4>
                        <p class="text-muted">Demonstrate knowledge & understanding</p>
                    </div>
                </div>
            </div>
            
<!-- Example for videoScreen bottom button (improve visibility) -->
<div class="text-center mt-4 mb-5">
    <button class="btn btn-outline-secondary btn-lg px-5" onclick="backToModule()">
        ← Back to Module
    </button>
</div>
        </div>

        <!-- Video Player -->
        <div id="videoScreen" class="d-none container">
            <div class="ratio ratio-16x9 bg-dark rounded-4 overflow-hidden shadow mb-4">
                <iframe id="videoPlayer" src="" frameborder="0" allowfullscreen></iframe>
            </div>
<!-- Example for videoScreen bottom button (improve visibility) -->
<div class="text-center mt-4 mb-5">
    <button class="btn btn-outline-secondary btn-lg px-5" onclick="backToModule()">
        ← Back to Module
    </button>
</div>
        </div>

        <!-- Quiz -->
        <div id="quizScreen" class="d-none container">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-body p-4 p-md-5">
                    <h4 class="text-center mb-4 fw-bold" id="questionText"></h4>
                    <div id="optionsContainer" class="row g-3"></div>
                    <div id="feedback" class="mt-4 text-center fw-bold fs-5 min-vh-50 d-flex align-items-center justify-content-center"></div>
                    <button id="nextBtn" class="btn btn-primary btn-lg w-100 mt-4 d-none">Next Question</button>
                </div>
            </div>

<!-- Example for videoScreen bottom button (improve visibility) -->
<div class="text-center mt-4 mb-5">
    <button class="btn btn-outline-secondary btn-lg px-5" onclick="backToModule()">
        ← Back to Module
    </button>
</div>
            
        </div>

        <!-- Results -->
        <div id="resultsScreen" class="d-none container">
            <div class="card shadow-lg border-0 rounded-4 text-center p-4 p-md-5">
                <h2 id="resultTitle" class="display-5 fw-bold mb-4"></h2>
                <div class="progress bg-light rounded-pill mb-4" style="height:40px;">
                    <div id="progressBar" class="progress-bar progress-bar-striped fs-4 fw-bold" style="width:0%">0%</div>
                </div>
                <div class="row g-3 mb-4">
                    <div class="col-6 col-md-3">
                        <div class="p-3 bg-light rounded-4">
                            <div class="fs-3 fw-bold text-primary" id="scorePercent">0%</div>
                            <small>Score</small>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="p-3 bg-light rounded-4">
                            <div class="fs-3 fw-bold text-success" id="correctCount">0</div>
                            <small>Correct</small>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="p-3 bg-light rounded-4">
                            <div class="fs-3 fw-bold" id="timeDisplay">0:00</div>
                            <small>Time</small>
                        </div>
                    </div>
                </div>
                <p id="passMessage" class="lead fw-bold mb-4"></p>
                <div class="d-flex flex-wrap gap-3 justify-content-center">
                    <button class="btn btn-outline-primary btn-lg px-5" onclick="restartQuiz()">Retake</button>
                </div>
            </div>
            
<!-- Example for videoScreen bottom button (improve visibility) -->
<div class="text-center mt-4 mb-5">
    <button class="btn btn-outline-secondary btn-lg px-5" onclick="backToModule()">
        ← Back to Module
    </button>
</div>
            
        </div>

        <!-- New Community Chat Screen (moved here as a sibling screen) -->
        <div id="communityScreen" class="d-none container">

            <h2 class="text-primary text-center mb-5 fw-bold">Mining Community Group</h2>
            <div class="card shadow-lg border-0 rounded-4 p-4 p-md-5">
                <p class="lead text-center mb-4">Join our global community for GCC candidates and mining enthusiasts! Discuss modules, share experiences, and collaborate in real-time.</p>
                <ul class="list-group mb-4">
                    <li class="list-group-item"><i class="bi bi-chat-dots me-2"></i>Real-time text chat</li>
                    <li class="list-group-item"><i class="bi bi-mic me-2"></i>Voice messaging and recordings</li>
                    <li class="list-group-item"><i class="bi bi-file-earmark-arrow-up me-2"></i>File uploads (videos, photos, documents)</li>
                    <li class="list-group-item"><i class="bi bi-people me-2"></i>Unlimited participants – join via link or add friends</li>
                </ul>
                <div class="text-center">
                    <a href="https://discord.gg/rfsRXS3BUR" target="_blank" class="btn btn-primary btn-lg px-5 mb-3">
                        <i class="bi bi-discord me-2"></i> Join Discord Group Now
                    </a>
                    <a href="https://drive.google.com/drive/folders/1IeRl6fuKQLLisLX1I0_FT2Xa6MyoLQFM?usp=drive_link" class="btn btn-primary btn-lg px-5 mb-3">
                        <i class="bi bi-cloud-arrow-up me-2"></i> Share Files via Google Drive
                    </a>

                    <p class="text-muted">Powered by Discord – free app download required for full features. Alternatively, ask an admin to add you using your Discord username.</p>
                    
                    <a href="https://www.linkedin.com/in/anthony-shishoki-11938331a" target="_blank">Connect with me on LinkedIn</a>
                    
                </div>
                <!-- Optional Discord Widget Embed (shows server preview) -->
                <div class="text-center mt-4">

                    <p class="small text-muted">GCC Mining Safety Community</p>
                    
                </div>
            </div>
            
<!-- Example for videoScreen bottom button (improve visibility) -->
<div class="text-center mt-4 mb-5">
    <button class="btn btn-outline-secondary btn-lg px-5" onclick="backToModule()">
        ← Back to Module
    </button>
</div>
            
        </div>

        <!-- Dashboard -->
        <div id="dashboardScreen" class="d-none container">

            <h2 class="text-primary text-center mb-5 fw-bold">Training Dashboard</h2>
            <div class="row g-4 mb-5">
                <div class="col-md-4">
                    <div class="card border-0 shadow text-center p-4">
                        <h5 class="text-muted mb-3">Modules Completed</h5>
                        <div class="display-4 fw-bold text-primary" id="dashCompleted">0/24</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow text-center p-4">
                        <h5 class="text-muted mb-3">Overall Pass Rate</h5>
                        <div class="display-4 fw-bold text-success" id="dashPassRate">0%</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow text-center p-4">
                        <h5 class="text-muted mb-3">Certificates Earned</h5>
                        <div class="display-4 fw-bold text-warning" id="dashCertificates">0</div>
                    </div>
                </div>
            </div>
            <div class="card shadow border-0">
                <div class="card-body p-4">
                    <h4 class="mb-3">Completed Modules</h4>
                    <ul id="completedModulesList" class="list-group list-group-flush"></ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ──────────────────────────────────────────────────────────────────────────────
// DATA
// ──────────────────────────────────────────────────────────────────────────────

const moduleNames = {
    handover: "Shift Handover & Pre-Shift Checks",
    lhd: "LHD Tramming in Decline",
    drill: "Face Drilling (Jumbo)",
    support: "Install Mesh & Bolts",
    vent: "Main Ventilation Failure",
    rockfall: "Major Rock Fall Event",
    traffic: "Traffic Conflict in Single Lane",
    reentry: "Unsafe Re-Entry Attempt",
    shaft_sinking: "Shaft Sinking (Vertical Shaft)",
    raise_drill: "Raise Drilling (Raise Boring)",
    
    lifting_operations: "Lifting Operations",
    civil_structural: "Civil and Structural Engineering",
    conveyor_monorail: "Conveyor Belt and Monorail",
    compressed_air: "Compressed Air and Reticulation",
    pump_fluid: "Pump and Fluid handling",
    steam_pressure: "Steam Generations and Pressure Vessels",
    
    electrical: "Underground Electrical Systems Safety",
    mhsa: "MHSA 1996 Regulations",
    seismicity: "Seismicity & Rockbursts",
    blasting: "Blasting & Explosives",
    evacuation: "Emergency Evacuation",
    fire: "Fire Monitoring, Prevention and Control",
    tmm: "Trackless Mobile Machinery",
    winders: "Winding Plant, Shafts and Headgears",

    community_chat: "Mining Community Group"

};

const advancedModules = ['seismicity','blasting','evacuation','fire','tmm','winders','community_chat'];

const moduleIcons = {
    handover: "bi-arrow-left-right",
    lhd: "bi-truck",
    drill: "bi-hammer",
    support: "bi-grid-3x3-gap",
    vent: "bi-wind",
    rockfall: "bi-exclamation-triangle",
    traffic: "bi-sign-stop",
    reentry: "bi-door-open",
    shaft_sinking: "bi-arrows-vertical",
    raise_drill: "bi-rocket-takeoff",
    
    lifting_operations: "bi-arrow-up-circle-fill",
    civil_structural: "bi-building-fill",
    conveyor_monorail: "bi-conveyor",
    compressed_air: "bi-wind",
    pump_fluid: "bi-water",
    steam_pressure: "bi-thermometer-sun",

        
    electrical: "bi-lightning",
    mhsa: "bi-book",
    seismicity: "bi-graph-up-arrow",
    blasting: "bi-boombox",
    evacuation: "bi-box-arrow-right",
    fire: "bi-fire",
    tmm: "bi-truck-flatbed",
    winders: "bi-elevator",

    community_chat: "bi-people-fill"

};

const videos = {
    handover: "https://www.youtube.com/embed/uqbDOIaEyHs",
    lhd: "https://www.youtube.com/embed/HjnCR0pBlQs",
    drill: "https://www.youtube.com/embed/rALo7h9pCwg",
    support: "https://www.youtube.com/embed/CJ80Gbmes88",
    vent: "https://www.youtube.com/embed/scULNpKA3ZU",
    rockfall: "https://www.youtube.com/embed/RxyBImZyFb4",
    traffic: "https://www.youtube.com/embed/bugO7N1AN0s",
    reentry: "https://www.youtube.com/embed/G2Hs51QDszc",
    shaft_sinking: "https://www.youtube.com/embed/dL0axVfO49s",
    raise_drill: "https://www.youtube.com/embed/0h_Zi5BNUPA",

    lifting_operations: "https://www.youtube.com/embed/fHOlpa6_Q2s",  
    civil_structural: "https://www.youtube.com/embed/D7U6i01ZlfI",
    conveyor_monorail: "https://www.youtube.com/embed/ZrnWnmhGpQY",
    compressed_air: "https://www.youtube.com/embed/O0VNIYn0Hxg",
    pump_fluid: "https://www.youtube.com/embed/WUal9LXc0iM",
    steam_pressure: "https://www.youtube.com/embed/lsiJiYrey0A",
   
    
    electrical: "https://www.youtube.com/embed/TMT6f3tZQSk",
    mhsa: "https://www.youtube.com/embed/X1DvlkgY-Sc",
    seismicity: "https://www.youtube.com/embed/geun1k07NkM",
    blasting: "https://www.youtube.com/embed/G2Hs51QDszc",
    evacuation: "https://www.youtube.com/embed/3aLWlDY_G9w",
    fire: "https://www.youtube.com/embed/x414lRd1aak",
    tmm: "https://www.youtube.com/embed/BYzg3G8gQYY",
    winders: "https://www.youtube.com/embed/HkE7m1cdvBU"
};

// Sample quizzes (you can expand with real questions)
const sampleQuizzes = {


handover: {name:"SHIFT HANDOVER & PRE-CHECKS", q: [
        {question:"Who must attend shift handover?", options:["Only shift boss","All incoming and outgoing crew"], correct:1, explanation:"All incoming and outgoing crew must attend to ensure full transfer of critical information about hazards, equipment status, and workplace conditions."},
        {question:"What must be signed before work starts?", options:["Nothing","Section 23 declaration"], correct:1, explanation:"The Section 23 declaration confirms that workers are fit for duty and understand the risks; it is a legal requirement under MHSA."},
        {question:"Red tag on equipment means?", options:["Minor fault","Do not operate — locked out"], correct:1, explanation:"A red tag indicates the equipment has been locked out for safety reasons and must not be operated until cleared by an authorised person."},
        {question:"What gas is checked with methanometer?", options:["Oxygen","Methane"], correct:1, explanation:"A methanometer is specifically designed to detect methane (CH₄), the primary explosive gas in underground coal and hard-rock mines."},
        {question:"Who signs Early Warning Device log?", options:["Anyone","Only shift boss"], correct:1, explanation:"Only the shift boss has the authority to verify and sign the Early Examination Warning Device log after inspection."},
        {question:"Can you work without cap lamp?", options:["Yes","Never"], correct:1, explanation:"A cap lamp is mandatory primary lighting and a legal requirement; working without one is prohibited."},
        {question:"Refuge bay must contain?", options:["Water only","SCSRs, water, first aid, phone"], correct:1, explanation:"Refuge bays are emergency shelters and must be stocked with self-contained self-rescuers (SCSRs), drinking water, first aid supplies, and communication."},
        {question:"Who declares workplace safe?", options:["Any miner","Shift boss after inspection"], correct:1, explanation:"The shift boss is legally responsible for inspecting the workplace and declaring it safe before work commences."},
        {question:"What is checked on LHD before use?", options:["Fuel only","Brakes, lights, horn, fire suppression"], correct:1, explanation:"A comprehensive pre-use inspection must include critical safety systems: brakes, lights, horn, and fire suppression."},
        {question:"What is a 'hot seat' changeover?", options:["Quick break","Driver change without stopping"], correct:1, explanation:"Hot seat changeover allows continuous production by swapping operators without shutting down the machine."},
        {question:"Who checks water dams?", options:["Anyone","Only designated person"], correct:1, explanation:"Only a competent designated person may inspect and sign off water dams due to flood risk."},
        {question:"What is a TARP?", options:["Tool","Trigger Action Response Plan"], correct:1, explanation:"TARP (Trigger Action Response Plan) defines measurable triggers and required actions for escalating risks."},
        {question:"Can you start work with unsigned logbook?", options:["Yes","Never"], correct:1, explanation:"An unsigned logbook means statutory inspections or declarations are incomplete; work may not commence."},
        {question:"Who checks ventilation doors?", options:["Operator","Only ventilation officer"], correct:1, explanation:"Ventilation doors are critical controls and must be inspected by the appointed ventilation officer."},
        {question:"What is a 'blind spot' check?", options:["Mirror","Physical walk-around"], correct:1, explanation:"A physical walk-around is required to confirm no personnel are in blind spots before moving equipment."},
        {question:"Who must carry a gas monitor?", options:["Only supervisor","All underground personnel"], correct:1, explanation:"Every person underground must carry a personal gas detector for immediate warning of hazardous atmospheres."},
        {question:"What is a 'lockout tagout'?", options:["Safety procedure","Equipment fault"], correct:0, explanation:"Lockout-tagout is a formal safety procedure to isolate energy sources before maintenance."},
        {question:"Can you work alone underground?", options:["Yes","Never"], correct:1, explanation:"The buddy system is mandatory underground; no person may work alone."},
        {question:"What is a 'pre-use inspection'?", options:["Optional","Mandatory before operating equipment"], correct:1, explanation:"Pre-use inspection is a legal requirement to identify defects before operating any machinery."},
        {question:"Who signs the refuge bay register?", options:["Anyone","Only shift boss"], correct:1, explanation:"The shift boss verifies refuge bay readiness and signs the register."},
        {question:"What is a 'stop block'?", options:["Traffic control","Emergency brake"], correct:0, explanation:"Stop blocks are physical barriers used to control vehicle movement at critical points."},
        {question:"What is a 'travelway inspection'?", options:["Daily walk","Only monthly"], correct:0, explanation:"Daily travelway inspections are required to identify ground falls, services damage, or obstructions."},
        {question:"Who checks fire extinguishers?", options:["Anyone","Only safety officer"], correct:1, explanation:"Only appointed competent persons may inspect and certify fire extinguishers."},
        {question:"What is a 'code of practice'?", options:["Suggestion","Legal requirement"], correct:1, explanation:"Codes of Practice are mandatory standards approved under MHSA."},
        {question:"Can you ignore a red tag?", options:["Yes","Never"], correct:1, explanation:"Ignoring a red tag defeats the lockout system and is a serious safety violation."},
        {question:"What is the purpose of shift handover?", options:["Social chat","Transfer of critical safety information"], correct:1, explanation:"To ensure continuity of safe operations by transferring all relevant information between shifts."},
        {question:"Who is responsible for workplace examination?", options:["Any miner","Shift boss"], correct:1, explanation:"The appointed shift boss has statutory responsibility for early examination."},
        {question:"Can defective equipment be used temporarily?", options:["Yes, slowly","Never"], correct:1, explanation:"Defective safety-critical equipment must be locked out immediately."},
        {question:"What is recorded in the logbook?", options:["Production only","Safety inspections and declarations"], correct:1, explanation:"All statutory examinations, declarations, and defects must be recorded."},
        {question:"Who conducts risk assessment before work?", options:["Anyone","Shift boss and team"], correct:1, explanation:"A formal take-5 or similar risk assessment is required before starting tasks."}
    ]},
    lhd: {name:"LHD OPERATIONS", q: [
        {question:"Minimum clearance from moving LHD?", options:["1 metre","2 metres from any part"], correct:1, explanation:"A minimum 2-metre exclusion zone from any part of a moving LHD protects pedestrians from swing and rollover risks."},
        {question:"Maximum speed in decline?", options:["25 km/h","15 km/h"], correct:1, explanation:"Speed is limited to 15 km/h in declines to maintain braking control and prevent runaway incidents."},
        {question:"Bucket height when loaded?", options:["On ground","Max 400mm off ground"], correct:1, explanation:"Loaded bucket must be carried low (max 400 mm) to maintain stability and low centre of gravity."},
        {question:"Before reversing you must?", options:["Just look","Horn 3 times + check mirrors"], correct:1, explanation:"Three distinct horn blasts warn personnel, followed by mirror and camera checks before reversing."},
        {question:"Can you ride in LHD bucket?", options:["Yes","Never"], correct:1, explanation:"Riding in the bucket is prohibited; it exposes persons to crushing and fall hazards."},
        {question:"Who may operate LHD?", options:["Anyone trained","Only competent certificate holder"], correct:1, explanation:"Only persons holding a valid competency certificate may operate an LHD."},
        {question:"Seatbelt in LHD cab?", options:["Optional","Mandatory at all times"], correct:1, explanation:"Seatbelts are mandatory to prevent ejection during rollover or collision."},
        {question:"Pedestrian near LHD must be?", options:["Within 1m","In refuge bay"], correct:1, explanation:"Pedestrians must remain in designated refuge bays when LHDs are operating nearby."},
        {question:"Fire on LHD — first action?", options:["Drive out","Activate suppression system"], correct:1, explanation:"Immediate activation of the onboard fire suppression system is the primary response."},
        {question:"What is a 'refuge bay'?", options:["Rest area","Safe waiting place"], correct:1, explanation:"Refuge bays are engineered safe zones for pedestrians during vehicle movement."},
        {question:"Can you park LHD on incline?", options:["Yes","Only with brakes and chocks"], correct:1, explanation:"Parking on inclines requires parking brake engaged and wheels chocked."},
        {question:"What is 'tramming'?", options:["Loading","Driving between points"], correct:1, explanation:"Tramming refers to transporting ore or waste between loading and tipping points."},
        {question:"LHD lights must be?", options:["Optional","Working at all times"], correct:1, explanation:"All lights must be functional to ensure visibility and warning to others."},
        {question:"Can you carry passengers in cab?", options:["Yes","Only with extra seat"], correct:1, explanation:"Passengers are only allowed if a certified second seat with seatbelt is fitted."},
        {question:"What is a 'tip'?", options:["Dumping point","Loading point"], correct:0, explanation:"The tip is the designated ore pass or stockpile dumping location."},
        {question:"LHD horn must be used?", options:["Never","When reversing and approaching"], correct:1, explanation:"Horn must sound before reversing and when approaching intersections or personnel."},
        {question:"What is a 'rollback'?", options:["Normal","Emergency brake failure"], correct:1, explanation:"Rollback occurs when brake failure allows uncontrolled movement down incline."},
        {question:"Can you leave LHD running unattended?", options:["Yes","Never"], correct:1, explanation:"Equipment must never be left running and unattended to prevent unauthorised use."},
        {question:"What is a 'load factor'?", options:["Speed","Weight capacity"], correct:1, explanation:"Load factor refers to the maximum safe payload relative to machine rating."},
        {question:"LHD must have?", options:["Radio","Two-way communication"], correct:1, explanation:"Effective two-way communication is required for coordination and emergency response."},
        {question:"What is a 'haulage way'?", options:["Any road","Designated vehicle route"], correct:1, explanation:"Haulage ways are engineered roadways specifically for mobile machinery."},
        {question:"Can you overtake another LHD?", options:["Yes","Only in designated areas"], correct:1, explanation:"Overtaking is only permitted in wide, clearly marked passing bays."},
        {question:"What is a 'derailment'?", options:["Track issue","LHD off road"], correct:1, explanation:"Derailment means the LHD has left the intended roadway, often causing damage."},
        {question:"LHD must stop at?", options:["Crossings","All intersections"], correct:1, explanation:"Full stop and right-of-way check is required at all intersections."},
        {question:"What is 'articulation lock'?", options:["Optional","Must be engaged when lifting"], correct:1, explanation:"Articulation lock bar must be fitted when raising the rear frame for maintenance."},
        {question:"What is the purpose of fire suppression on LHD?", options:["Optional extra","Mandatory safety system"], correct:1, explanation:"Automatic fire suppression is mandatory on all diesel LHDs underground."},
        {question:"Can you tram with raised bucket?", options:["Yes","Never when loaded"], correct:1, explanation:"Raised bucket reduces visibility and stability."},
        {question:"Who performs daily LHD inspection?", options:["Maintenance","Operator"], correct:1, explanation:"The operator is responsible for pre-shift inspection and reporting defects."},
        {question:"What is 'berms' requirement?", options:["Optional","Mandatory on declines"], correct:1, explanation:"Berms or bund walls must prevent runaway vehicles."},
        {question:"LHD braking distance increases with?", options:["Speed only","Load and gradient"], correct:1, explanation:"Heavier loads and steeper gradients dramatically increase stopping distance."},
        {question:"What is 'rollback prevention'?", options:["Normal brake","Anti-rollback device"], correct:1, explanation:"Automatic systems prevent reverse movement on inclines."}
    ]},
    drill: {name:"JUMBO DRILLING", q: [
        {question:"Who may operate jumbo?", options:["Any miner","Only competent operator"], correct:1, explanation:"Only operators with a valid jumbo competency certificate may operate the machine."},
        {question:"Mandatory PPE while drilling?", options:["Hard hat only","Ear plugs, dust mask, glasses"], correct:1, explanation:"Drilling produces high noise and silica dust; hearing protection, dust mask, and eye protection are mandatory."},
        {question:"Minimum distance from face while drilling?", options:["2m","5m behind operator"], correct:1, explanation:"Personnel must stay at least 5 m behind the operator to avoid flying rock and hose whip."},
        {question:"Before charging holes you must?", options:["Just charge","Examine face + wash down"], correct:1, explanation:"Face must be examined for misfires and sockets, then washed down to remove dust and improve visibility."},
        {question:"Most common drilling accident?", options:["Noise","Flying rocks"], correct:1, explanation:"Flying rock fragments from collaring or break-through cause the majority of injuries."},
        {question:"Water pressure for dust suppression?", options:["Any","Minimum 7 bar"], correct:1, explanation:"Adequate water flow (minimum 7 bar pressure) is required for effective dust suppression."},
        {question:"Can you drill with broken support?", options:["Yes","Never"], correct:1, explanation:"Drilling may not proceed if temporary support is inadequate or damaged."},
        {question:"What is a 'boomer'?", options:["Drill type","Jumbo arm"], correct:1, explanation:"A boomer is the hydraulic drill feed/arm on an electro-hydraulic jumbo."},
        {question:"Who checks drill steels?", options:["Anyone","Only competent person"], correct:1, explanation:"Only competent persons may inspect and approve drill steels for shank wear and cracks."},
        {question:"What is a 'drifter'?", options:["Drill motor","Operator"], correct:0, explanation:"The drifter is the hydraulic rock drill motor that provides percussion and rotation."},
        {question:"Can you drill without water?", options:["Yes","Never"], correct:1, explanation:"Dry drilling is prohibited due to extreme silica dust hazard."},
        {question:"What is a 'face examination'?", options:["Visual check","Mandatory before drilling"], correct:1, explanation:"A thorough face examination for loose rock, misfires, and support condition is mandatory before drilling."},
        {question:"Who installs temporary support?", options:["Anyone","Only support team"], correct:1, explanation:"Temporary support (mesh, bolts) may only be installed by competent support crews."},
        {question:"What is a 'muck pile'?", options:["Ore heap","Broken rock"], correct:1, explanation:"The muck pile is the broken rock heap remaining after blasting."},
        {question:"Collaring speed should be?", options:["High","Low to prevent deviation"], correct:1, explanation:"Low rotation and thrust during collaring prevents hole deviation."},
        {question:"Who marks drill pattern?", options:["Operator","Geologist or surveyor"], correct:1, explanation:"Drill patterns are marked by technical personnel to ensure correct hole placement."},
        {question:"What is 'burden'?", options:["Hole depth","Distance to free face"], correct:1, explanation:"Burden is the distance from the hole to the nearest free face."},
        {question:"Can you drill into misfire?", options:["Yes","Never"], correct:1, explanation:"Drilling into misfired holes risks detonation."},
        {question:"Water flush must be?", options:["Optional","Continuous"], correct:1, explanation:"Continuous water flush is required for dust control and bit cooling."},
        {question:"Who approves jumbo modifications?", options:["Operator","Engineering"], correct:1, explanation:"All modifications require engineering approval and risk assessment."},
        {question:"Drill bit sharpening frequency?", options:["Never","As per usage standard"], correct:1, explanation:"Bits must be sharpened or replaced when gauge wear exceeds limits."},
        {question:"What is 'toe' in drilling?", options:["Bottom hole","Distance from floor"], correct:0, explanation:"Toe spacing ensures proper floor break."},
        {question:"Can you leave jumbo unattended with pressure?", options:["Yes","Never"], correct:1, explanation:"Hydraulic pressure must be released before leaving machine."},
        {question:"Who records drilling progress?", options:["Operator","Section supervisor"], correct:1, explanation:"Accurate records of metres drilled and support installed are required."},
        {question:"Dust sampling during drilling?", options:["Optional","Mandatory"], correct:1, explanation:"Regular personal and area dust sampling is required."},
        {question:"Jumbo fire suppression?", options:["Optional","Mandatory"], correct:1, explanation:"Automatic fire suppression systems are mandatory on electro-hydraulic jumbos."},
        {question:"What is 'lookout holes'?", options:["Extra holes","First holes for visibility"], correct:1, explanation:"Lookout holes provide breakthrough visibility for alignment."},
        {question:"What is 'spacing' in pattern?", options:["Any","Distance between holes"], correct:1, explanation:"Spacing controls fragmentation and throw."},
        {question:"Who calibrates jumbo alignment?", options:["Operator","Surveyor"], correct:1, explanation:"Laser alignment checked by surveyor."}
    ]},
    support: {name:"INSTALL MESH & BOLTS", q: [
        {question:"Who may install permanent support?", options:["Any miner","Only competent rock engineer crew"], correct:1, explanation:"Only trained and competent support installation crews may install permanent ground support."},
        {question:"Minimum tendon length in poor ground?", options:["1.2 m","As per support standard"], correct:1, explanation:"Support standards specify minimum lengths based on rock mass rating and span."},
        {question:"What must be done before scaling?", options:["Nothing","Examine face and bar down loose"], correct:1, explanation:"Face examination and mechanical scaling to remove loose rock is mandatory."},
        {question:"Can you stand under unsupported ground?", options:["Yes","Never"], correct:1, explanation:"Never position yourself under unsupported ground during support installation."},
        {question:"What is a 'split set'?", options:["Bolt type","Friction rock stabiliser"], correct:1, explanation:"Split sets are friction anchors driven into slightly smaller drill holes."},
        {question:"Torque requirement for resin bolts?", options:["None","As specified in standard"], correct:1, explanation:"Resin bolts require specific torque to ensure full column encapsulation."},
        {question:"Who approves support standards?", options:["Shift boss","Appointed rock engineer"], correct:1, explanation:"Support standards are designed and approved by the mine's rock engineer (2.14.1 appointment)."},
        {question:"Mesh must overlap by?", options:["100 mm","300 mm minimum"], correct:1, explanation:"Mesh sheets must overlap by at least 300 mm and be secured at intervals."},
        {question:"What is 'factor of safety' for support?", options:["1.0","Minimum 1.5"], correct:1, explanation:"Permanent support systems must have a factor of safety of at least 1.5."},
        {question:"Can temporary support be left permanent?", options:["Yes","Never"], correct:1, explanation:"Temporary support must be replaced by permanent support within specified time."},
        {question:"Who inspects installed support?", options:["Operator","Support inspector"], correct:1, explanation:"Dedicated support inspectors verify installation quality and pull tests."},
        {question:"What is 'pull test'?", options:["Visual check","Load test on bolts"], correct:1, explanation:"Pull testing verifies anchorage capacity of installed tendons."},
        {question:"Support installation sequence?", options:["Any order","From stable to unstable ground"], correct:1, explanation:"Support must progress from supported to unsupported areas."},
        {question:"Lacing wire spacing for mesh?", options:["Any","Maximum 300 mm"], correct:1, explanation:"Mesh must be laced with wire at maximum 300 mm centres."},
        {question:"Who records support installation?", options:["Anyone","Support crew leader"], correct:1, explanation:"Installation details must be recorded in the support logbook."},
        {question:"What is 'tendons'?", options:["Cables","Rock bolts and anchors"], correct:1, explanation:"Tendons are the reinforcing elements (bolts, cables) transferring load to stable rock."},
        {question:"Can you reuse resin cartridges?", options:["Yes","Never"], correct:1, explanation:"Partially used or old resin must be discarded."},
        {question:"Plate washer purpose?", options:["Decoration","Load distribution"], correct:1, explanation:"Washers distribute load and prevent rock spalling around bolt head."},
        {question:"Support standard review frequency?", options:["Never","After incidents or changes"], correct:1, explanation:"Standards must be reviewed after rock-related incidents or geological changes."},
        {question:"What is 'yieldable support'?", options:["Rigid","Energy absorbing"], correct:1, explanation:"Yieldable bolts allow controlled deformation during rockburst."},
        {question:"Who trains support crews?", options:["Anyone","Accredited provider"], correct:1, explanation:"Training must be by MQA-accredited providers."},
        {question:"Support defect reporting?", options:["Optional","Mandatory immediate"], correct:1, explanation:"Any defective support must be reported and barricaded immediately."},
        {question:"What is 'pre-tensioning'?", options:["Optional","Required for mechanical bolts"], correct:1, explanation:"Initial tension improves immediate support effectiveness."},
        {question:"Can support be installed wet?", options:["No","Only dry resin allowed"], correct:1, explanation:"Water contamination affects resin curing."},
        {question:"Who signs support logbook?", options:["Installer","Supervisor"], correct:1, explanation:"Shift supervisor verifies and signs off completed support."},
        {question:"Support density in development ends?", options:["Standard","Increased"], correct:1, explanation:"Closer spacing required in advancing faces."},
        {question:"What is 'dynamic support'?", options:["Standard","Rockburst resistant"], correct:1, explanation:"Support designed to absorb seismic energy."},
        {question:"What is 'cone bolt'?", options:["Standard bolt","Yielding rockburst bolt"], correct:1, explanation:"Cone bolts allow controlled sliding under high load."}
    ]},
    vent: {name:"MAIN VENTILATION FAILURE", q: [
        {question:"First action on ventilation failure?", options:["Continue work","Evacuate to refuge or surface"], correct:1, explanation:"Immediate evacuation using SCSRs to the nearest refuge bay or surface."},
        {question:"Who declares ventilation failure?", options:["Anyone","Ventilation officer or manager"], correct:1, explanation:"Only the appointed ventilation officer or mine manager may declare the emergency."},
        {question:"Can you re-enter after fan restart?", options:["Yes","Only after gas tests clear"], correct:1, explanation:"Re-entry only after full atmosphere testing and clearance by ventilation officer."},
        {question:"Primary cause of ventilation failure?", options:["Power cut","Fan mechanical failure"], correct:0, explanation:"Both are common, but procedures cover all causes including power loss."},
        {question:"SCSR duration underground?", options:["10 min","Minimum 30 min"], correct:1, explanation:"Self-contained self-rescuers provide at least 30 minutes of oxygen."},
        {question:"Who monitors return air?", options:["Anyone","Ventilation department"], correct:1, explanation:"Continuous monitoring of return airways for methane and contaminants."},
        {question:"Backup ventilation system?", options:["Optional","Mandatory auxiliary fans"], correct:1, explanation:"Critical areas must have backup ventilation systems."},
        {question:"Stench gas used for?", options:["Odour control","Emergency warning"], correct:1, explanation:"Stench gas release triggers immediate evacuation."},
        {question:"Minimum air velocity?", options:["0.5 m/s","As per COP"], correct:1, explanation:"Air velocity requirements are specified in the ventilation COP."},
        {question:"Who maintains vent doors?", options:["Operator","Ventilation crew"], correct:1, explanation:"Specialised ventilation crews maintain doors and regulators."},
        {question:"What is 'recirculation'?", options:["Normal","Dangerous condition"], correct:1, explanation:"Recirculation of contaminated air must be prevented."},
        {question:"Auxiliary fan placement?", options:["Any location","Minimum 10 m from face"], correct:1, explanation:"To prevent recirculation and ensure fresh air delivery."},
        {question:"Who records fan stoppages?", options:["Operator","Ventilation officer"], correct:1, explanation:"All stoppages must be logged and reported."},
        {question:"Methane layering detection?", options:["Visual","Gas monitoring"], correct:1, explanation:"Regular monitoring at roof level for layering."},
        {question:"Ventilation plan approval?", options:["Manager","Principal Inspector"], correct:1, explanation:"Major changes require DMRE approval."},
        {question:"Who examines ventilation districts?", options:["Anyone","Ventilation officer"], correct:1, explanation:"Statutory monthly examinations required."},
        {question:"Air quantity measurement?", options:["Optional","Mandatory regular"], correct:1, explanation:"Velocity and volume measured at key points."},
        {question:"What is 'booster fan'?", options:["Main fan","Secondary fan"], correct:1, explanation:"Booster fans increase pressure in remote districts."},
        {question:"Ventilation door interlocks?", options:["Optional","Required on main doors"], correct:1, explanation:"To prevent simultaneous opening and short-circuiting."},
        {question:"Who trains in SCSR use?", options:["Anyone","Competent person"], correct:1, explanation:"Annual refresher training mandatory."},
        {question:"Refuge bay air supply?", options:["None","Compressed air or chemical"], correct:1, explanation:"Independent air supply for extended occupation."},
        {question:"What is 'scrubber'?", options:["Cleaning device","CO2 removal"], correct:1, explanation:"Chemical scrubbers in refuge chambers remove CO2."},
        {question:"Ventilation survey frequency?", options:["Annual","As per COP"], correct:1, explanation:"Comprehensive surveys at defined intervals."},
        {question:"Who approves auxiliary ventilation?", options:["Supervisor","Ventilation officer"], correct:1, explanation:"All auxiliary systems require approval."},
        {question:"What is 'pressure differential'?", options:["Not important","Critical for control"], correct:1, explanation:"Pressure differences drive airflow through the mine."},
        {question:"Can you block ventilation?", options:["Yes","Never"], correct:1, explanation:"Blocking airways is a serious offence."},
        {question:"What is 'ventilation on demand'?", options:["Always full","Controlled by need"], correct:1, explanation:"Systems adjust airflow based on occupancy and activity."}
    ]},
    rockfall: {name:"MAJOR ROCK FALL EVENT", q: [
        {question:"First priority after major fall?", options:["Clear rock","Ensure all personnel accounted for"], correct:1, explanation:"Life safety and headcount take absolute priority over rock clearance."},
        {question:"Who leads rock fall recovery?", options:["Shift boss","Appointed rock engineer"], correct:1, explanation:"The rock engineer directs technical recovery and support reinstatement."},
        {question:"Can you enter fall area immediately?", options:["Yes","Only after stability assessment"], correct:1, explanation:"Area must be barricaded and assessed by competent person before entry."},
        {question:"Primary cause of rockfalls?", options:["Blasting","Poor support or geology"], correct:1, explanation:"Inadequate support relative to geological conditions is the root cause."},
        {question:"Who investigates rock fall?", options:["Safety rep","Formal inquiry team"], correct:1, explanation:"All serious rock falls require formal investigation per MHSA Section 11."},
        {question:"Support after rock fall?", options:["Same as before","Enhanced standard"], correct:1, explanation:"Support standards are reviewed and upgraded based on failure analysis."},
        {question:"What is 'barricading'?", options:["Temporary fence","Restricted access control"], correct:1, explanation:"Physical barriers and signs to prevent unauthorised entry."},
        {question:"Who approves re-entry?", options:["Shift boss","Rock engineer"], correct:1, explanation:"Only the rock engineer may approve safe re-entry after rehabilitation."},
        {question:"Rock fall reporting time?", options:["24 hours","Immediately"], correct:1, explanation:"Immediate reporting to supervisor and formal report within shift."},
        {question:"TARP trigger for rock fall?", options:["Noise","Ground movement"], correct:1, explanation:"Seismic events or visible ground deterioration trigger response plans."},
        {question:"What is 'scaling' after fall?", options:["Cleaning","Removing loose material"], correct:1, explanation:"Mechanical removal of loose rock post-fall."},
        {question:"Who reviews support design?", options:["Manager","Rock engineer"], correct:1, explanation:"Mandatory review after significant fall."},
        {question:"Can temporary support be used post-fall?", options:["No","Only as immediate measure"], correct:1, explanation:"Temporary support for safe access only."},
        {question:"Rock fall training frequency?", options:["Once","Annual refresher"], correct:1, explanation:"All underground personnel require regular rock fall awareness training."},
        {question:"What is 'fall of ground' statistics?", options:["Minor","Leading cause of fatalities"], correct:1, explanation:"Fall of ground remains a major cause of serious injuries and fatalities."},
        {question:"Who monitors ground conditions?", options:["Anyone","All personnel"], correct:1, explanation:"Every person has duty to report adverse ground conditions."},
        {question:"Support installation after fall?", options:["Standard","Increased density"], correct:1, explanation:"Higher support density required in affected area."},
        {question:"What is 'remote scaling'?", options:["Manual","Mechanical from safe distance"], correct:1, explanation:"Use of long tools or machines to avoid exposure."},
        {question:"Who signs off rehabilitation?", options:["Supervisor","Rock engineer"], correct:1, explanation:"Formal sign-off required before resumption of work."},
        {question:"Fall of ground COP required?", options:["Optional","Mandatory"], correct:1, explanation:"Specific code of practice for ground control mandatory."},
        {question:"What is 'beam building'?", options:["Support type","Preventing roof sag"], correct:1, explanation:"Interconnected support to control large spans."},
        {question:"Who conducts pull tests post-fall?", options:["Support crew","Independent inspector"], correct:1, explanation:"Increased testing after incidents."},
        {question:"Rock fall warning signs?", options:["None","Cracking, drumming"], correct:1, explanation:"Audible and visual indicators of stress."},
        {question:"What is 'pre-conditioning'?", options:["Blasting","Controlled stress release"], correct:1, explanation:"Techniques to reduce stored energy."},
        {question:"Who updates hazard map after fall?", options:["Geologist","Rock engineer"], correct:1, explanation:"Geotechnical hazard plan updated with new data."},
        {question:"Can production continue near fall?", options:["Yes","Never until cleared"], correct:1, explanation:"All work stopped until area declared safe."}
    ]},
    traffic: {name:"TRAFFIC CONFLICT IN SINGLE LANE", q: [
        {question:"Right of way in single lane decline?", options:["Upgoing vehicle","Loaded vehicle"], correct:1, explanation:"Loaded vehicles have priority to maintain momentum and reduce spillage."},
        {question:"Communication method in single lane?", options:["Horn only","Two-way radio protocol"], correct:1, explanation:"Mandatory radio call-up before entering single lane sections."},
        {question:"Speed limit in traffic conflict areas?", options:["20 km/h","As per traffic plan"], correct:1, explanation:"Reduced speed limits apply in high-conflict zones."},
        {question:"Who controls traffic?", options:["Anyone","Appointed traffic controller"], correct:1, explanation:"Designated controllers manage complex intersections."},
        {question:"Refuge bay spacing?", options:["50 m","Maximum 30 m"], correct:1, explanation:"Refuge bays must be provided at maximum 30 m intervals in travel ways."},
        {question:"What is 'call-up point'?", options:["Sign","Radio check-in location"], correct:1, explanation:"Designated points where vehicles must radio position before proceeding."},
        {question:"Can light vehicles overtake TMM?", options:["Yes","Never"], correct:1, explanation:"Light vehicles must never overtake trackless mobile machinery."},
        {question:"Signage requirement?", options:["Optional","Mandatory at all changes"], correct:1, explanation:"Clear signage for speed, priority, and hazards is mandatory."},
        {question:"Who updates traffic plan?", options:["Operator","Engineering"], correct:1, explanation:"The traffic management plan is reviewed by engineering department."},
        {question:"Collision reporting?", options:["Next shift","Immediately"], correct:1, explanation:"All collisions or near-misses must be reported immediately."},
        {question:"What is 'separation distance'?", options:["Any","Minimum 50 m"], correct:1, explanation:"Safe following distance between vehicles."},
        {question:"Who trains drivers in traffic rules?", options:["Anyone","Accredited"], correct:1, explanation:"Formal training and assessment required."},
        {question:"Light vehicle speed limit?", options:["40 km/h","As per plan"], correct:1, explanation:"Typically lower than TMM."},
        {question:"What is 'passing bay'?", options:["Parking","Wide section for overtaking"], correct:1, explanation:"Designated areas for safe passing."},
        {question:"Radio protocol for conflict?", options:["Optional","Mandatory call and response"], correct:1, explanation:"Clear communication to resolve priority."},
        {question:"Who monitors traffic compliance?", options:["Supervisor","All levels"], correct:1, explanation:"Supervisors enforce rules daily."},
        {question:"Traffic incident investigation?", options:["Minor","Formal for all"], correct:1, explanation:"All incidents investigated to prevent recurrence."},
        {question:"What is 'proximity detection'?", options:["Optional","Mandatory on TMM"], correct:1, explanation:"Systems warn of personnel near vehicles."},
        {question:"Parking on inclines?", options:["Any","With chocks"], correct:1, explanation:"Wheels chocked and brake applied."},
        {question:"Who approves traffic changes?", options:["Manager","Engineering"], correct:1, explanation:"All layout changes require formal approval."},
        {question:"Traffic COP required?", options:["No","Yes"], correct:1, explanation:"Mandatory traffic management code of practice."},
        {question:"What is 'right of way' sign?", options:["Suggestion","Mandatory obedience"], correct:1, explanation:"Signs dictate priority at intersections."},
        {question:"Can pedestrians walk in haulage ways?", options:["Yes","Only in emergencies"], correct:1, explanation:"Pedestrians must use separate walkways."},
        {question:"Who records traffic incidents?", options:["Driver","Safety department"], correct:1, explanation:"All incidents logged and analysed."},
        {question:"Traffic plan review frequency?", options:["Never","Annual or after incident"], correct:1, explanation:"Regular review and update required."},
        {question:"What is 'collision avoidance'?", options:["Driver skill","Technology + procedures"], correct:1, explanation:"Combination of systems and rules."}
    ]},
    reentry: {name:"UNSAFE RE-ENTRY ATTEMPT", q: [
        {question:"Minimum re-entry time after blasting?", options:["15 minutes","30 minutes"], correct:1, explanation:"Minimum 30 minutes for ventilation to clear fumes and dust."},
        {question:"Who authorises re-entry?", options:["Blaster","Shift boss after examination"], correct:1, explanation:"Only the shift boss may authorise re-entry after face examination."},
        {question:"What must be checked before re-entry?", options:["Nothing","Misfires, ventilation, support"], correct:1, explanation:"Comprehensive check for misfires, gas levels, and ground conditions."},
        {question:"Can you re-enter alone?", options:["Yes","Never"], correct:1, explanation:"Re-entry must be in teams with communication."},
        {question:"Fume clearance measured by?", options:["Smell","Gas monitoring"], correct:1, explanation:"Portable gas detectors confirm safe atmosphere."},
        {question:"Who examines for misfires?", options:["Anyone","Competent blaster"], correct:1, explanation:"Only competent persons may search for and handle misfires."},
        {question:"Re-entry log required?", options:["No","Yes, signed by shift boss"], correct:1, explanation:"Re-entry must be recorded in the logbook."},
        {question:"What is 'blow-over'?", options:["Ventilation term","Fume clearance time"], correct:1, explanation:"Additional time allowed for complete fume dilution."},
        {question:"Early re-entry penalty?", options:["Warning","Serious offence"], correct:1, explanation:"Premature re-entry is a serious violation with disciplinary action."},
        {question:"Who monitors re-entry compliance?", options:["Safety rep","All supervisors"], correct:1, explanation:"Supervisors enforce re-entry procedures at all levels."},
        {question:"What is 'sentinel'?", options:["Guard","Person controlling access"], correct:1, explanation:"Appointed person prevents unauthorised entry."},
        {question:"Re-entry after secondary blast?", options:["Same time","Extended"], correct:1, explanation:"Additional clearance time required."},
        {question:"Who declares face safe?", options:["Blaster","Shift boss"], correct:1, explanation:"Shift boss after examination and testing."},
        {question:"Can re-entry time be reduced?", options:["Yes","Never"], correct:1, explanation:"Fixed minimum times for safety."},
        {question:"Gas testing instruments?", options:["Any","Calibrated detectors"], correct:1, explanation:"Only approved and calibrated instruments."},
        {question:"Who records re-entry time?", options:["Anyone","Shift boss"], correct:1, explanation:"Accurate time recorded in logbook."},
        {question:"What is 'fume class'?", options:["Blasting term","Toxicity rating"], correct:1, explanation:"Determines required clearance time."},
        {question:"Re-entry training?", options:["Optional","Mandatory"], correct:1, explanation:"All personnel trained in procedures."},
        {question:"Who investigates early re-entry?", options:["Safety","Formal inquiry"], correct:1, explanation:"Serious incidents require formal investigation."}
    ]},
    shaft_sinking: {name:"SHAFT SINKING", q: [
        {question:"Who may work in sinking shaft?", options:["Any miner","Only competent sinkers"], correct:1, explanation:"Only trained and competent shaft sinking crews may work in the shaft."},
        {question:"Minimum kibble clearance?", options:["1 m","3 m from bottom"], correct:1, explanation:"Kibble must be raised at least 3 m before personnel enter bottom."},
        {question:"Shaft lining type?", options:["Any","Concrete or steel"], correct:0, explanation:"Permanent lining based on ground conditions."},
        {question:"What is 'mucking'?", options:["Drilling","Removing broken rock"], correct:1, explanation:"Loading and hoisting blasted rock from shaft bottom."},
        {question:"Can you ride kibble?", options:["Yes","Only authorised"], correct:1, explanation:"Only for emergency or inspection, with safety devices."},
        {question:"Shaft inspection frequency?", options:["Daily","Before each shift"], correct:1, explanation:"Full inspection for loose rock and damage."},
        {question:"What is 'stage'?", options:["Platform","Sinking platform"], correct:1, explanation:"Multi-deck platform for sinking operations."},
        {question:"Who approves sinking method?", options:["Supervisor","Engineer"], correct:1, explanation:"Detailed method statement approved by shaft engineer."},
        {question:"Ventilation in sinking shaft?", options:["Natural","Forced auxiliary"], correct:1, explanation:"Auxiliary fans and ducting to shaft bottom."},
        {question:"What is 'curb ring'?", options:["Support","Concrete form"], correct:0, explanation:"Temporary support ring for lining placement."},
        {question:"Shaft signals system?", options:["Bell","Two-way radio"], correct:1, explanation:"Reliable communication mandatory."},
        {question:"Who checks ropes?", options:["Anyone","Rigger"], correct:1, explanation:"Daily inspection by competent rigger."},
        {question:"What is 'headgear'?", options:["Helmet","Hoisting structure"], correct:1, explanation:"Surface structure for sheaves and kibble."},
        {question:"Can sinking continue in water?", options:["Yes","Only with control"], correct:1, explanation:"Water inflow must be managed with pumps."},
        {question:"Shaft bottom barricade?", options:["Optional","Mandatory"], correct:1, explanation:"To prevent falls during mucking."},
        {question:"Who records sinking advance?", options:["Operator","Shaft supervisor"], correct:1, explanation:"Daily progress and incidents logged."},
        {question:"What is 'pilot hole'?", options:["Guide","Advance bore"], correct:1, explanation:"For alignment and ground probing."},
        {question:"Shaft sinking COP?", options:["No","Yes"], correct:1, explanation:"Mandatory code of practice."},
        {question:"What is 'grout curtain'?", options:["Water control","Sealing injections"], correct:1, explanation:"To reduce water inflow."},
        {question:"Who trains sinkers?", options:["Anyone","Accredited"], correct:1, explanation:"MQA-accredited training."},
        {question:"Shaft emergency procedure?", options:["Normal","Specific plan"], correct:1, explanation:"For rescue from bottom."},
        {question:"What is 'bunton'?", options:["Beam","Shaft divider"], correct:1, explanation:"Horizontal beams for support."},
        {question:"Shaft survey frequency?", options:["Monthly","After each blast"], correct:1, explanation:"To ensure verticality."},
        {question:"Who approves explosives use?", options:["Blaster","Shaft blaster"], correct:1, explanation:"Specialised shaft blasting."},
        {question:"Shaft sinking risk assessment?", options:["Once","Ongoing"], correct:1, explanation:"Updated for each phase."}
    ]},
    raise_drill: {name:"RAISE DRILLING", q: [
        {question:"Who operates raise drill?", options:["Any driller","Competent operator"], correct:1, explanation:"Only certified raise drill operators."},
        {question:"Pilot hole diameter?", options:["Any","As per reamer"], correct:1, explanation:"Typically 230-350 mm for alignment."},
        {question:"What is 'reamer'?", options:["Bit","Enlarging head"], correct:1, explanation:"Cutting head pulled up to enlarge hole."},
        {question:"Can personnel enter during reaming?", options:["Yes","Never"], correct:1, explanation:"Area below barricaded and guarded."},
        {question:"Who checks torque?", options:["Operator","Continuous monitoring"], correct:0, explanation:"Operator monitors pressure and torque."},
        {question:"Raise boring advantage?", options:["Speed","Stability"], correct:0, explanation:"Safer than conventional raise climbing."},
        {question:"What is 'back reaming'?", options:["Alternative","Not used"], correct:0, explanation:"Standard is bottom-up reaming."},
        {question:"Who surveys pilot hole?", options:["Operator","Surveyor"], correct:1, explanation:"Accurate surveying for alignment."},
        {question:"Raise ventilation during reaming?", options:["Natural","Forced"], correct:1, explanation:"Auxiliary ventilation required."},
        {question:"Who records raise advance?", options:["Operator","Supervisor"], correct:1, explanation:"Daily progress recorded."},
        {question:"Raise boring COP required?", options:["No","Yes"], correct:1, explanation:"Specific procedures mandatory."},
        {question:"What is 'stabiliser'?", options:["Support","Drilling component"], correct:1, explanation:"Centralisers in drill string."},
        {question:"Who approves reamer change?", options:["Operator","Engineering"], correct:1, explanation:"Planned maintenance procedure."},
        {question:"Raise inspection frequency?", options:["Once","Regular"], correct:1, explanation:"Ongoing ground condition monitoring."},
        {question:"What is 'breakthrough'?", options:["Completion","Pilot reaching lower level"], correct:1, explanation:"Critical alignment phase."},
        {question:"Who clears raise after reaming?", options:["Anyone","Dedicated crew"], correct:1, explanation:"Safe mucking procedure."},
        {question:"Raise ladder installation?", options:["Optional","Mandatory for access"], correct:1, explanation:"Safe access system required."},
        {question:"Raise boring risk assessment?", options:["Once","Before each raise"], correct:1, explanation:"Site-specific assessment required."}
    ]},



    lifting_operations:{ name: "Lifting Operations", q: [

  {"question": "What is the statutory factor of safety (FOS) for chain slings used for general lifting?", "options": ["4:1", "5:1", "6:1", "8:1"], "correct": 1, "explanation": "Driven Machinery Regulations require 5:1 minimum for chain slings."},
  {"question": "Who must personally inspect lifting tackle before each use?", "options": ["Storeman", "Operator", "Appointed lifting machinery inspector", "Any artisan"], "correct": 2, "explanation": "The appointed competent person must inspect and tag."},
  {"question": "What colour tag shows lifting tackle is currently safe?", "options": ["Red", "Green", "Yellow", "White"], "correct": 1, "explanation": "Green = inspected and safe; red = defective/out of service."},
  {"question": "Maximum allowable wear on a chain link before discard?", "options": ["5%", "10%", "15%", "20%"], "correct": 1, "explanation": "10% reduction in diameter is the statutory limit."},
  {"question": "Synthetic fibre slings should not be used at angles greater than?", "options": ["30°", "45°", "60°", "90°"], "correct": 2, "explanation": "Capacity drops dramatically above 60° from vertical."},
  {"question": "What marking must appear on a wire rope sling thimble?", "options": ["SWL only", "Manufacturer and size", "Date of manufacture", "All of the above"], "correct": 3, "explanation": "Full traceability markings are required."},
  {"question": "How often must lifting tackle be thoroughly examined?", "options": ["Daily", "Monthly", "Every 3 months", "Annually"], "correct": 2, "explanation": "Every 3 months or after any incident."},
  {"question": "What is the purpose of a bow shackle keeper pin?", "options": ["Prevent unscrewing", "Increase strength", "Reduce weight", "Improve appearance"], "correct": 0, "explanation": "Safety pin/bolt prevents accidental opening."},
  {"question": "Which lifting machine requires a load-radius chart?", "options": ["Overhead crane", "Mobile crane", "Chain block", "Forklift"], "correct": 1, "explanation": "Mobile cranes must display rated capacity at different radii."},
  {"question": "What must be done if a chain link is elongated?", "options": ["Use until next inspection", "Discard immediately", "Weld repair", "Shorten chain"], "correct": 1, "explanation": "Elongation indicates plastic deformation – discard."},
  {"question": "Minimum FOS for man-riding tackle?", "options": ["6:1", "8:1", "10:1", "12:1"], "correct": 2, "explanation": "10:1 is required for personnel lifting."},
  {"question": "Who issues a permit to use defective lifting tackle?", "options": ["No one", "Chief inspector", "Competent person", "Operator"], "correct": 0, "explanation": "Defective tackle may never be used."},
  {"question": "What is the correct way to store synthetic slings?", "options": ["In sunlight", "In cool, dry, dark place", "Hanging outside", "In engine room"], "correct": 1, "explanation": "UV and heat degrade synthetic materials."},
  {"question": "What indicates a wire rope must be discarded?", "options": ["6 broken wires in one lay", "Visible rust only", "Slight kinking", "Normal shine"], "correct": 0, "explanation": "Broken wires in one lay length is a discard criterion."},
  {"question": "What is the purpose of a spreader beam?", "options": ["Increase lifting height", "Reduce sling angle stress", "Replace chain", "Speed up lifting"], "correct": 1, "explanation": "Maintains vertical sling legs to maximise capacity."},
  {"question": "How should a load be lifted off the ground?", "options": ["Quick jerk", "Slow and steady", "Sideways pull", "Any way"], "correct": 1, "explanation": "Sudden jerks cause shock loading."},
  {"question": "What device prevents load swing on a crane?", "options": ["Tag line", "Anti-two-block", "Limit switch", "Hoist brake"], "correct": 0, "explanation": "Tag lines control swing during travel."},
  {"question": "Who may operate a mobile crane?", "options": ["Any driver", "Person with valid certificate", "Apprentice", "Supervisor"], "correct": 1, "explanation": "Driven Machinery Regulations require competency certificate."},
  {"question": "What is the maximum wind speed for safe crane operation?", "options": ["10 m/s", "15 m/s", "20 m/s", "No limit"], "correct": 1, "explanation": "Typically 15 m/s (54 km/h) is the safe limit."},
  {"question": "What must be done before lifting personnel?", "options": ["Use man basket only", "Use any cage", "No special requirement", "Use chain sling"], "correct": 0, "explanation": "Approved man-riding basket/cage required."},
  {"question": "Purpose of load test on new lifting tackle?", "options": ["Prove strength", "Check appearance", "Reduce cost", "Speed up use"], "correct": 0, "explanation": "125% proof load test required before first use."},
  {"question": "What is a 'soft eye' on a sling?", "options": ["Thimble protected", "No thimble", "Chain eye", "Shackle eye"], "correct": 1, "explanation": "Soft eye = unprotected loop, lower capacity."},
  {"question": "Minimum age to operate lifting machinery?", "options": ["16", "18", "21", "No age limit"], "correct": 1, "explanation": "18 years minimum per DMR."},
  {"question": "What indicates overloading of a sling?", "options": ["Permanent elongation", "Colour change", "Noise", "Smell"], "correct": 0, "explanation": "Permanent stretch = overload – discard."},
  {"question": "Who keeps records of lifting tackle inspections?", "options": ["Operator", "Appointed person", "Storeman", "DMR"], "correct": 1, "explanation": "Appointed competent person maintains register."}


        
     ]},   
        
    civil_structural: { name: "Civil and Structural Engineering", q: [ 

  {"question": "Purpose of movement joints in concrete structures?", "options": ["Increase strength", "Allow thermal expansion/shrinkage", "Reduce cost", "Improve finish"], "correct": 1, "explanation": "Prevents uncontrolled cracking from temperature and shrinkage."},
  {"question": "Minimum concrete cover for severe exposure (SANS 10400)?", "options": ["25 mm", "40 mm", "50 mm", "75 mm"], "correct": 2, "explanation": "50 mm required in severe conditions to protect rebar."},
  {"question": "Why are construction joints planned in large pours?", "options": ["Aesthetic", "Control cracking and allow phasing", "Save cement", "Increase strength"], "correct": 1, "explanation": "Manage heat and shrinkage cracking."},
  {"question": "Most common field test for concrete workability?", "options": ["Compressive test", "Slump test", "Rebound hammer", "Core test"], "correct": 1, "explanation": "Slump test measures consistency."},
  {"question": "Typical minimum grade for structural columns?", "options": ["C20/25", "C25/30", "C30/37", "C40/50"], "correct": 2, "explanation": "C30/37 commonly specified for columns."},
  {"question": "What causes concrete spalling?", "options": ["Too much water", "Corrosion of reinforcement", "Low cement", "Excess aggregate"], "correct": 1, "explanation": "Rust expansion cracks cover concrete."},
  {"question": "Purpose of shear reinforcement in beams?", "options": ["Increase bending strength", "Resist diagonal tension", "Reduce deflection", "Improve appearance"], "correct": 1, "explanation": "Stirrups resist shear failure."},
  {"question": "Minimum curing time for structural concrete?", "options": ["3 days", "7 days", "14 days", "28 days"], "correct": 1, "explanation": "7 days minimum for most structural elements."},
  {"question": "What is the slump range for pumped concrete?", "options": ["25–50 mm", "75–100 mm", "100–150 mm", "200+ mm"], "correct": 2, "explanation": "Higher slump (100–150 mm) required for pumping."},
  {"question": "Maximum allowable crack width in water-retaining structures?", "options": ["0.1 mm", "0.2 mm", "0.3 mm", "0.5 mm"], "correct": 1, "explanation": "0.2 mm typical limit to prevent leakage."},
  {"question": "Purpose of expansion joints in long buildings?", "options": ["Allow movement due to temperature", "Increase load capacity", "Reduce foundation size", "Improve aesthetics"], "correct": 0, "explanation": "Prevent stress from thermal expansion."},
  {"question": "What test measures compressive strength?", "options": ["Slump", "Cube test", "Rebound", "Ultrasonic"], "correct": 1, "explanation": "150 mm cubes crushed at 28 days."},
  {"question": "Minimum grade for foundations in aggressive soil?", "options": ["C20/25", "C25/30", "C30/37", "C40/50"], "correct": 3, "explanation": "Higher grade for durability in sulphate soils."},
  {"question": "What is 'bleeding' in concrete?", "options": ["Excess water rising", "Cracking", "Honeycombing", "Segregation"], "correct": 0, "explanation": "Excess water migrates to surface."},
  {"question": "Purpose of formwork ties?", "options": ["Hold forms together", "Reinforce concrete", "Improve finish", "Reduce weight"], "correct": 0, "explanation": "Resist concrete pressure."},
  {"question": "Maximum aggregate size for columns?", "options": ["10 mm", "20 mm", "40 mm", "No limit"], "correct": 1, "explanation": "20 mm typical to avoid congestion."},
  {"question": "What indicates poor compaction?", "options": ["Honeycombing", "Smooth finish", "High strength", "No cracks"], "correct": 0, "explanation": "Voids from inadequate vibration."},
  {"question": "Minimum lap length for rebar (SANS)?", "options": ["20 × diameter", "30 × diameter", "40 × diameter", "50 × diameter"], "correct": 2, "explanation": "Typically 40d for tension laps."},
  {"question": "Purpose of waterstops in joints?", "options": ["Prevent water leakage", "Increase strength", "Reduce cost", "Improve appearance"], "correct": 0, "explanation": "Seal construction joints in water tanks."},
  {"question": "What is 'carbonation'?", "options": ["Chloride attack", "CO₂ reduces alkalinity", "Sulphate attack", "Freeze-thaw damage"], "correct": 1, "explanation": "Lowers pH, initiates rebar corrosion."},
  {"question": "Minimum concrete temperature for placing?", "options": ["0 °C", "5 °C", "10 °C", "15 °C"], "correct": 1, "explanation": "5 °C minimum to prevent freezing."},
  {"question": "What causes honeycombing?", "options": ["Poor vibration", "Too much water", "Low cement", "Fine aggregate only"], "correct": 0, "explanation": "Inadequate consolidation."},
  {"question": "Purpose of construction sequence planning?", "options": ["Speed up work", "Control shrinkage stresses", "Reduce labour", "Improve safety"], "correct": 1, "explanation": "Phased pours reduce restraint cracking."},
  {"question": "Maximum w/c ratio for durability?", "options": ["0.40", "0.50", "0.60", "0.70"], "correct": 1, "explanation": "0.50 maximum for most structural concrete."},
  {"question": "Who approves concrete mix design?", "options": ["Contractor", "Engineer", "Lab technician", "Client"], "correct": 1, "explanation": "Structural engineer approves."}


     ]},   

    
        
    conveyor_monorail: { name: "Conveyor Belt and Monorail", q: [

  {"question": "What is the statutory requirement for guarding conveyor nip points?", "options": ["Optional", "Fixed guards where accessible", "Warning signs only", "No guarding if slow"], "correct": 1, "explanation": "DMR Regulation 8 mandates secure guarding of all nip points."},
  {"question": "Device required to prevent run-back on inclined conveyors?", "options": ["Anti-runback idler", "Backstop or holdback", "Brake on pulley", "Speed sensor"], "correct": 1, "explanation": "Backstop prevents reverse movement during power failure."},
  {"question": "Maximum allowable sag between idlers on loaded belt?", "options": ["1%", "2.5%", "5%", "No limit"], "correct": 1, "explanation": "Sag >2.5% causes spillage and high power use."},
  {"question": "Minimum FOS for monorail load chain/rope?", "options": ["4:1", "5:1", "6:1", "8:1"], "correct": 2, "explanation": "DMR requires 6:1 for monorail hoisting elements."},
  {"question": "Immediate action on longitudinal belt tear?", "options": ["Continue slowly", "Stop and isolate", "Increase tension", "Patch later"], "correct": 1, "explanation": "Immediate stop prevents catastrophic failure."},
  {"question": "What must be installed at conveyor transfer points?", "options": ["Skirt boards and seals", "Extra idlers only", "Nothing special", "Warning lights"], "correct": 0, "explanation": "Skirts reduce spillage and dust."},
  {"question": "Purpose of belt training idlers?", "options": ["Increase speed", "Keep belt centred", "Reduce noise", "Clean belt"], "correct": 1, "explanation": "Self-aligning idlers correct belt tracking."},
  {"question": "Maximum permissible belt speed in underground mines?", "options": ["2 m/s", "3 m/s", "4 m/s", "No limit"], "correct": 2, "explanation": "Typically limited to 4 m/s for safety."},
  {"question": "What device detects belt slip?", "options": ["Slip switch", "Load cell", "Temperature sensor", "Vibration switch"], "correct": 0, "explanation": "Slip switch trips on excessive pulley-belt slip."},
  {"question": "Minimum clearance under conveyor belt?", "options": ["300 mm", "500 mm", "750 mm", "1000 mm"], "correct": 2, "explanation": "750 mm minimum for safe crossing/maintenance."},
  {"question": "What colour coding is used for conveyor emergency stop cords?", "options": ["Red", "Yellow", "Green", "Blue"], "correct": 0, "explanation": "Red pull-cords are standard for emergency stops."},
  {"question": "Purpose of take-up device on conveyor?", "options": ["Adjust belt tension", "Increase capacity", "Reduce sag", "Both A & C"], "correct": 3, "explanation": "Maintains proper tension and controls sag."},
  {"question": "How often must conveyor belt splices be inspected?", "options": ["Daily", "Weekly", "Monthly", "Every 3 months"], "correct": 0, "explanation": "Daily visual checks required for splices."},
  {"question": "What indicates a worn drive pulley lagging?", "options": ["Belt slip", "Noise increase", "Vibration", "All of the above"], "correct": 3, "explanation": "Poor lagging causes slip, noise and vibration."},
  {"question": "Minimum distance between conveyor and walkway?", "options": ["300 mm", "500 mm", "750 mm", "1000 mm"], "correct": 2, "explanation": "750 mm clearance for safe access."},
  {"question": "What protects against belt tear propagation?", "options": ["Rip detectors", "Edge sensors", "Speed switches", "Load cells"], "correct": 0, "explanation": "Rip detectors stop belt on longitudinal tear."},
  {"question": "Purpose of impact idlers at loading points?", "options": ["Absorb shock", "Increase speed", "Reduce noise", "Clean material"], "correct": 0, "explanation": "Cushion heavy material drop impact."},
  {"question": "Who may operate a monorail locomotive?", "options": ["Any person", "Competent certificate holder", "Apprentice", "Supervisor"], "correct": 1, "explanation": "Requires valid competency certificate."},
  {"question": "What is mandatory on monorail tracks?", "options": ["Derailment prevention", "Speed limit signs", "Both A & B", "Nothing special"], "correct": 2, "explanation": "Derailment guards and signage required."},
  {"question": "Maximum gradient for monorail track?", "options": ["1:10", "1:20", "1:30", "No limit"], "correct": 1, "explanation": "Typically 1:20 maximum for safe operation."},
  {"question": "What must be done before conveyor maintenance?", "options": ["Lockout/tagout", "Speed reduction only", "Warning signs", "Nothing"], "correct": 0, "explanation": "Full LOTO required for safety."},
  {"question": "Purpose of belt weigher?", "options": ["Measure tonnage", "Detect overload", "Both A & B", "Clean belt"], "correct": 2, "explanation": "Continuous mass measurement."},
  {"question": "What indicates misalignment?", "options": ["Edge wear", "Spillage", "Both A & B", "Nothing"], "correct": 2, "explanation": "Misalignment causes edge damage and spillage."},
  {"question": "Minimum pulley diameter ratio to belt thickness?", "options": ["100:1", "150:1", "200:1", "No ratio"], "correct": 1, "explanation": "Typical minimum 150:1 for bend fatigue."},
  {"question": "Emergency stop pull cord spacing?", "options": ["Every 10 m", "Every 20 m", "Every 30 m", "No spacing"], "correct": 2, "explanation": "Maximum 30 m spacing per regulations."}


     ]},   


    
    compressed_air: { name: "Compressed Air and Reticulation", q: [


  {"question": "Maximum allowable working pressure for standard compressed air reticulation?", "options": ["500 kPa", "700 kPa", "1000 kPa", "No limit"], "correct": 2, "explanation": "DMR limits to 1000 kPa unless specially designed."},
  {"question": "Valve required at end of every air branch line?", "options": ["Gate valve", "Self-closing dead-man valve", "Ball valve", "Globe valve"], "correct": 1, "explanation": "Dead-man valve prevents uncontrolled discharge."},
  {"question": "Primary purpose of moisture separators?", "options": ["Increase pressure", "Remove water/corrosion prevention", "Reduce noise", "Improve flow"], "correct": 1, "explanation": "Prevents corrosion and freezing."},
  {"question": "Standard colour for compressed air pipelines underground?", "options": ["Red", "Blue", "Yellow", "Green"], "correct": 1, "explanation": "Blue is standard for compressed air."},
  {"question": "What must be fitted to air receivers?", "options": ["Safety valve", "Pressure gauge", "Drain valve", "All of the above"], "correct": 3, "explanation": "All are mandatory per PER."},
  {"question": "Maximum hose length without support?", "options": ["5 m", "10 m", "15 m", "No limit"], "correct": 1, "explanation": "Hoses over 10 m require support."},
  {"question": "Purpose of aftercooler on compressor?", "options": ["Reduce temperature", "Increase pressure", "Remove oil", "Reduce noise"], "correct": 0, "explanation": "Cools air to condense moisture."},
  {"question": "What indicates water in air lines?", "options": ["Freezing in winter", "Rust in tools", "Both A & B", "Nothing"], "correct": 2, "explanation": "Water causes freezing and corrosion."},
  {"question": "Minimum inspection frequency for air receivers?", "options": ["Monthly", "3-monthly", "Annually", "Every 36 months"], "correct": 2, "explanation": "Annual external, 36-month internal per PER."},
  {"question": "What protects against overpressure in air lines?", "options": ["Relief valve", "Pressure switch", "Both A & B", "Nothing"], "correct": 2, "explanation": "Both devices required."},
  {"question": "Standard thread for air hose couplings?", "options": ["BSP", "NPT", "Metric", "Any"], "correct": 0, "explanation": "BSP is standard in South Africa."},
  {"question": "Purpose of oil/water separator?", "options": ["Remove contaminants", "Increase efficiency", "Reduce pressure", "Clean pipes"], "correct": 0, "explanation": "Prevents oil pollution."},
  {"question": "What must be done before opening air line?", "options": ["Depressurise", "Increase pressure", "Nothing", "Open valve slowly"], "correct": 0, "explanation": "Full depressurisation required."},
  {"question": "Minimum pipe size for main air header?", "options": ["25 mm", "50 mm", "Depends on flow", "No minimum"], "correct": 2, "explanation": "Sized according to flow and pressure drop."},
  {"question": "What causes excessive pressure drop in reticulation?", "options": ["Small pipes", "Leaks", "Both A & B", "Nothing"], "correct": 2, "explanation": "Undersized pipes and leaks reduce efficiency."},
  {"question": "Who may repair compressed air equipment?", "options": ["Any artisan", "Competent person", "Operator", "Supervisor"], "correct": 1, "explanation": "Requires competent person per regulations."},
  {"question": "Purpose of air dryer?", "options": ["Remove moisture", "Increase volume", "Reduce temperature", "All"], "correct": 0, "explanation": "Prevents water in system."},
  {"question": "Maximum allowable leak rate?", "options": ["5%", "10%", "15%", "No limit"], "correct": 1, "explanation": "Typical target <10% leakage."},
  {"question": "What indicates compressor overload?", "options": ["High temperature", "Low pressure", "Both", "Nothing"], "correct": 2, "explanation": "Overheating and pressure drop."},
  {"question": "Minimum distance from compressor to receiver?", "options": ["1 m", "3 m", "5 m", "No minimum"], "correct": 1, "explanation": "Minimum 3 m for cooling."},
  {"question": "Purpose of automatic drain trap?", "options": ["Remove condensate", "Save energy", "Both", "Nothing"], "correct": 2, "explanation": "Removes water automatically."},
  {"question": "What protects against air line whip?", "options": ["Whipcheck cables", "Strong clamps", "Both", "Nothing"], "correct": 2, "explanation": "Prevents hose whipping if disconnected."},
  {"question": "Standard pressure for rock drills?", "options": ["400 kPa", "600 kPa", "800 kPa", "1000 kPa"], "correct": 1, "explanation": "Typically 600 kPa for pneumatic drills."},
  {"question": "What must be recorded for air receivers?", "options": ["Inspection dates", "Test pressures", "Both", "Nothing"], "correct": 2, "explanation": "Full history in register."},
  {"question": "Maximum temperature for compressed air discharge?", "options": ["40 °C", "60 °C", "80 °C", "No limit"], "correct": 2, "explanation": "Typically limited to 80 °C."}


     ]},   

        
    pump_fluid: { name: "Pump and Fluid handling", q: [

  {"question": "Main cause of cavitation in centrifugal pumps?", "options": ["High discharge", "NPSHa < NPSHr", "High speed", "High viscosity"], "correct": 1, "explanation": "Net Positive Suction Head insufficient."},
  {"question": "Device to prevent dry running?", "options": ["Pressure switch", "Low level/float switch", "Check valve", "Relief valve"], "correct": 1, "explanation": "Protects pump from no-flow damage."},
  {"question": "Purpose of foot valve in sump pumps?", "options": ["Prevent backflow/keep prime", "Increase pressure", "Reduce vibration", "Filter"], "correct": 0, "explanation": "Maintains suction prime."},
  {"question": "Minimum inspection frequency for dewatering pumps?", "options": ["Daily", "Weekly", "Monthly", "Quarterly"], "correct": 0, "explanation": "Daily checks per mine regulations."},
  {"question": "What indicates worn pump impeller?", "options": ["Reduced flow/head", "Vibration", "Both", "Nothing"], "correct": 2, "explanation": "Erosion reduces performance."},
  {"question": "Purpose of gland packing?", "options": ["Seal shaft", "Cool shaft", "Both", "Nothing"], "correct": 2, "explanation": "Seals and cools."},
  {"question": "What is 'pump priming'?", "options": ["Filling with fluid", "Increasing speed", "Reducing pressure", "Cleaning"], "correct": 0, "explanation": "Removing air for suction."},
  {"question": "Maximum suction lift for centrifugal pumps?", "options": ["4 m", "6 m", "8 m", "10 m"], "correct": 2, "explanation": "Approximately 8 m theoretical max."},
  {"question": "Purpose of non-return valve?", "options": ["Prevent reverse flow", "Increase pressure", "Reduce noise", "All"], "correct": 0, "explanation": "Stops backflow on shutdown."},
  {"question": "What causes seal failure?", "options": ["Dry running", "Abrasion", "Both", "Nothing"], "correct": 2, "explanation": "Common causes of mechanical seal damage."},
  {"question": "Minimum NPSH margin recommended?", "options": ["0.5 m", "1 m", "2 m", "No margin"], "correct": 2, "explanation": "2 m safety margin typical."},
  {"question": "Purpose of strainer on suction line?", "options": ["Prevent debris entry", "Increase flow", "Reduce pressure", "Nothing"], "correct": 0, "explanation": "Protects impeller."},
  {"question": "What is 'vapour locking'?", "options": ["Air in pump", "Vapour bubbles", "Both", "Nothing"], "correct": 2, "explanation": "Vapour blocks suction."},
  {"question": "Typical material for acid-resistant pumps?", "options": ["Cast iron", "Stainless steel", "Bronze", "Plastic"], "correct": 1, "explanation": "SS for corrosive fluids."},
  {"question": "Purpose of balance drum in multistage pump?", "options": ["Reduce axial thrust", "Increase pressure", "Reduce speed", "Nothing"], "correct": 0, "explanation": "Balances thrust forces."},
  {"question": "What indicates bearing failure?", "options": ["Noise", "High temperature", "Both", "Nothing"], "correct": 2, "explanation": "Early warning signs."},
  {"question": "Minimum flow through pump?", "options": ["Zero", "10% of BEP", "30% of BEP", "No minimum"], "correct": 2, "explanation": "Minimum flow to prevent overheating."},
  {"question": "Purpose of pump curve?", "options": ["Show performance", "Calculate power", "Both", "Nothing"], "correct": 2, "explanation": "Head, flow, efficiency, power."},
  {"question": "What causes pump recirculation?", "options": ["Low flow", "High flow", "Both", "Nothing"], "correct": 0, "explanation": "Occurs at low flow rates."},
  {"question": "Who may repair critical pumps?", "options": ["Any artisan", "Competent person", "Operator", "Supervisor"], "correct": 1, "explanation": "Requires competent person."},
  {"question": "Purpose of lantern ring?", "options": ["Distribute flush water", "Reduce leakage", "Both", "Nothing"], "correct": 2, "explanation": "Cooling and sealing."},
  {"question": "Maximum temperature for standard centrifugal pump?", "options": ["80 °C", "120 °C", "150 °C", "No limit"], "correct": 1, "explanation": "Typically 120 °C without cooling."},
  {"question": "What is 'specific speed'?", "options": ["Pump classification", "Efficiency measure", "Both", "Nothing"], "correct": 0, "explanation": "Characterises impeller type."},
  {"question": "Purpose of vent valve on pump casing?", "options": ["Remove air", "Increase pressure", "Reduce flow", "Nothing"], "correct": 0, "explanation": "For priming."},
  {"question": "Minimum clearance for gland adjustment?", "options": ["0.5 mm", "1 mm", "2 mm", "No clearance"], "correct": 1, "explanation": "Typical 1 mm drip rate."}


     ]},   

        
    steam_pressure: { name: "Steam Generations and Pressure Vessels", q: [

  {"question": "Who is legally responsible for safe boiler operation?", "options": ["Operator", "Appointed competent person", "Manager", "Inspector"], "correct": 1, "explanation": "PER requires appointed competent person."},
  {"question": "Minimum frequency for internal inspection of steam receiver?", "options": ["12 months", "24 months", "36 months", "48 months"], "correct": 2, "explanation": "36 months per Pressure Equipment Regulations."},
  {"question": "Mandatory device to prevent boiler overpressure?", "options": ["Pressure gauge", "Safety valve", "Water gauge", "Blowdown valve"], "correct": 1, "explanation": "Safety valve is essential."},
  {"question": "Procedure before entering pressure vessel?", "options": ["Permit-to-work + isolation", "Drain only", "Cool only", "No procedure"], "correct": 0, "explanation": "Full PTW and gas-free required."},
  {"question": "Purpose of boiler blowdown?", "options": ["Remove sludge/TDS", "Increase pressure", "Cool boiler", "Clean tubes"], "correct": 0, "explanation": "Controls scaling and corrosion."},
  {"question": "What indicates low water in boiler?", "options": ["Low level alarm", "High steam pressure", "Both", "Nothing"], "correct": 0, "explanation": "Critical safety alarm."},
  {"question": "Minimum water level gauge requirement?", "options": ["One", "Two independent", "Three", "No gauge"], "correct": 1, "explanation": "Two independent gauges mandatory."},
  {"question": "Purpose of superheater?", "options": ["Increase steam temperature", "Reduce pressure", "Remove moisture", "All"], "correct": 0, "explanation": "Produces dry superheated steam."},
  {"question": "What is 'carryover' in boilers?", "options": ["Water in steam", "Steam in water", "Both", "Nothing"], "correct": 0, "explanation": "Contaminates steam system."},
  {"question": "Maximum allowable TDS in boiler water?", "options": ["1000 ppm", "2000 ppm", "3000 ppm", "Depends on boiler"], "correct": 3, "explanation": "Controlled by blowdown."},
  {"question": "Purpose of economiser?", "options": ["Preheat feedwater", "Superheat steam", "Reduce pressure", "Nothing"], "correct": 0, "explanation": "Recovers heat from flue gas."},
  {"question": "Who may operate a steam boiler?", "options": ["Any person", "Boiler attendant certificate holder", "Apprentice", "Manager"], "correct": 1, "explanation": "Requires valid certificate."},
  {"question": "What protects against furnace explosion?", "options": ["Flame scanner", "Purge cycle", "Both", "Nothing"], "correct": 2, "explanation": "Prevents fuel accumulation."},
  {"question": "Minimum pressure test frequency for boilers?", "options": ["Annually", "Every 2 years", "Every 3 years", "After repair"], "correct": 3, "explanation": "After major repair or as required."},
  {"question": "Purpose of fusible plug?", "options": ["Low water protection", "Overpressure", "Both", "Nothing"], "correct": 0, "explanation": "Melts on low water exposure."},
  {"question": "What is 'priming' in boilers?", "options": ["Sudden water carryover", "Slow steam rise", "Both", "Nothing"], "correct": 0, "explanation": "Caused by high water level."},
  {"question": "Material for high-pressure steam pipes?", "options": ["Mild steel", "Carbon steel", "Stainless", "Cast iron"], "correct": 1, "explanation": "Carbon steel standard for high temp."},
  {"question": "Purpose of steam trap?", "options": ["Remove condensate", "Allow steam pass", "Both", "Nothing"], "correct": 2, "explanation": "Efficient condensate removal."},
  {"question": "What indicates scale buildup?", "options": ["High fuel use", "Overheating tubes", "Both", "Nothing"], "correct": 2, "explanation": "Reduces heat transfer."},
  {"question": "Minimum safety valve capacity?", "options": ["Evaporation rate", "1.5 × evaporation", "2 × evaporation", "No minimum"], "correct": 1, "explanation": "Must exceed boiler capacity."},
  {"question": "Who approves boiler repairs?", "options": ["Operator", "Authorized inspector", "Manager", "Any"], "correct": 1, "explanation": "Authorized person required."},
  {"question": "Purpose of feedwater treatment?", "options": ["Remove oxygen/scale", "Increase pH", "Both", "Nothing"], "correct": 2, "explanation": "Prevents corrosion and scaling."},
  {"question": "Maximum allowable CO in boiler flue?", "options": ["100 ppm", "200 ppm", "500 ppm", "No limit"], "correct": 1, "explanation": "Typical limit for efficiency/safety."},
  {"question": "What is 'water hammer'?", "options": ["Sudden pressure surge", "Slow flow", "Both", "Nothing"], "correct": 0, "explanation": "Caused by condensate slugs."},
  {"question": "Minimum logbook entries for boiler?", "options": ["Pressure, water level, blowdown", "Only pressure", "Nothing", "All"], "correct": 0, "explanation": "Full operating parameters."}

     ]},   


    
    electrical: {name:"UNDERGROUND ELECTRICAL SAFETY", q: [
        {question:"Who may perform work on electrical apparatus?", options:["Any miner","Only competent authorized person"], correct:1, explanation:"Only persons registered and authorised under the regulations may work on electrical apparatus."},
        {question:"What is the main hazard of trailing cables?", options:["Tripping","Damage leading to shock or fire"], correct:1, explanation:"Mechanical damage to insulation can expose live conductors, causing shock or methane ignition."},
        {question:"Can you work on live electrical equipment?", options:["Yes, if quick","Never, must be isolated"], correct:1, explanation:"All work on electrical apparatus must be done dead; live work is strictly prohibited underground."},
        {question:"What must be done before working on electrical machinery?", options:["Nothing","Lockout and tagout"], correct:1, explanation:"Isolation, lockout, tagout, and testing for dead are mandatory steps."},
        {question:"Flameproof equipment is required underground to prevent?", options:["Dust","Ignition of methane"], correct:1, explanation:"Flameproof enclosures contain internal explosions without igniting surrounding methane."},
        {question:"What is an arc flash?", options:["Short circuit","Uncontrolled electrical discharge"], correct:1, explanation:"Arc flash is a violent release of energy from an electrical fault, causing severe burns and blast."},
        {question:"Helmet light assemblies must comply with?", options:["Any standard","SANS 1438"], correct:1, explanation:"Cap lamps must meet SANS 1438 for flameproof construction and battery safety."},
        {question:"Who approves electrical reticulation design?", options:["Shift boss","Competent professional engineer"], correct:1, explanation:"Designs must be approved by a registered professional electrical engineer."},
        {question:"Trailing cables must be protected from?", options:["Dust only","Mechanical damage"], correct:1, explanation:"Cables must be hung or protected to prevent vehicle damage."},
        {question:"What gas is produced when charging batteries?", options:["Oxygen","Hydrogen"], correct:1, explanation:"Hydrogen gas evolved during charging is highly explosive in confined spaces."},
        {question:"Battery charging stations must have?", options:["Nothing special","Ventilation and no smoking"], correct:1, explanation:"Forced ventilation and no ignition sources are required to disperse hydrogen."},
        {question:"Can water be used on electrical fires?", options:["Always","No, use dry extinguisher"], correct:1, explanation:"Water conducts electricity; only CO₂ or dry powder extinguishers may be used."},
        {question:"What is required for portable electrical tools underground?", options:["Normal plugs","Flameproof and earth leakage"], correct:1, explanation:"Tools must be flameproof with 30 mA earth leakage protection."},
        {question:"Earth leakage protection is mandatory on?", options:["High voltage only","All electrical apparatus"], correct:1, explanation:"Earth leakage relays are required on all underground electrical supplies."},
        {question:"Who tests electrical installations?", options:["Anyone","Competent person"], correct:1, explanation:"Only competent authorised persons may test and certify installations."},
        {question:"Overhead power lines underground must have?", options:["No protection","Guards or barriers"], correct:1, explanation:"Physical guards or warning signs must prevent contact by vehicles."},
        {question:"What is a 'competent person' for electrical work?", options:["Trained miner","Registered and experienced"], correct:1, explanation:"Competent persons must hold formal electrical qualification and mine authorisation."},
        {question:"Can flexible cables be repaired with tape?", options:["Yes","Only with proper vulcanizing"], correct:1, explanation:"Temporary tape repairs are not permitted; proper vulcanised joints are required."},
        {question:"What causes most electrical accidents underground?", options:["Water","Improper isolation"], correct:1, explanation:"Failure to properly isolate and test for dead is the leading cause."},
        {question:"Substations underground must be?", options:["Open","Enclosed and locked"], correct:1, explanation:"Substations must be flameproof, locked, and access-controlled."},
        {question:"What is the purpose of earthing?", options:["Grounding current","Prevent shock"], correct:1, explanation:"Earthing provides a low-resistance path for fault current to trip protection."},
        {question:"Can you overload electrical circuits?", options:["Yes","Never"], correct:1, explanation:"Overloading causes overheating and potential ignition of methane."},
        {question:"Portable transformers must be?", options:["Any type","Flameproof"], correct:1, explanation:"All transformers underground must be flameproof certified."},
        {question:"What is required after electrical maintenance?", options:["Nothing","Testing and certification"], correct:1, explanation:"Post-maintenance testing and sign-off by authorised person is mandatory."},
        {question:"Electrical tools must be inspected?", options:["Monthly","Before each use"], correct:1, explanation:"Pre-use visual inspection of cables and plugs is required."},
        {question:"What is a 'dead' circuit?", options:["Switched off","Tested and proven no voltage"], correct:1, explanation:"Dead means isolated, locked, and tested with an approved voltage indicator."},
        {question:"Who issues permit to work on electrical?", options:["Supervisor","Authorized person"], correct:1, explanation:"Only an authorised electrical person may issue the permit."},
        {question:"Cable joints underground must be?", options:["Taped","Flameproof"], correct:1, explanation:"All joints must be made in flameproof joint boxes."},
        {question:"What is the risk of damaged insulation?", options:["Minor","Electric shock"], correct:1, explanation:"Damaged insulation exposes live conductors, risking shock or arc flash."},
        {question:"Lightning arrestors are required on?", options:["Surface only","Surface power lines"], correct:1, explanation:"Surge arrestors protect surface supply from lightning strikes."},
        {question:"Can non-flameproof equipment be used underground?", options:["Yes","Never"], correct:1, explanation:"All electrical equipment underground must be flameproof or intrinsically safe."},
        {question:"What must be displayed on electrical panels?", options:["Nothing","Warnings and ratings"], correct:1, explanation:"Danger notices, voltage ratings, and responsible person details must be displayed."},
        {question:"Electrical records must be kept for?", options:["1 year","As required by COP"], correct:1, explanation:"Examination and test records must be retained per the mine's Code of Practice."},
        {question:"Who reports electrical defects?", options:["Only electrician","All employees"], correct:1, explanation:"Every employee has a duty to report defects immediately."},
        {question:"What is 'intrinsically safe' equipment?", options:["Low power","Cannot cause ignition"], correct:1, explanation:"Intrinsically safe circuits limit energy to prevent spark ignition of methane."},
        {question:"Power must be isolated during?", options:["Blasting","Blasting nearby"], correct:0, explanation:"Power must be cut in the blasting zone to prevent stray currents detonating explosives."},
        {question:"What is a 'switch handle lock' for?", options:["Security","Lockout"], correct:1, explanation:"Padlocks on switch handles prevent unauthorised re-energisation."},
        {question:"Can you touch exposed wires?", options:["If insulated","Never"], correct:1, explanation:"Exposed conductors must always be treated as live."},
        {question:"Electrical safety is part of?", options:["Optional training","Mandatory induction"], correct:1, explanation:"Electrical safety forms part of compulsory induction and refresher training."},
        {question:"What is the voltage limit for handheld tools?", options:["220V","110V or less"], correct:1, explanation:"Handheld tools are limited to 110 V for reduced shock severity."},
        {question:"Cables must not lie in?", options:["Dry areas","Water"], correct:1, explanation:"Water reduces insulation resistance and increases shock risk."},
        {question:"Who approves electrical COP?", options:["Manager","Inspector"], correct:1, explanation:"The Principal Inspector of Mines approves the electrical Code of Practice."},
        {question:"Electrical fires produce?", options:["Smoke only","Toxic fumes"], correct:1, explanation:"Burning insulation releases highly toxic fumes including dioxins."},
        {question:"What is 'double insulation'?", options:["Extra protection","No earth needed"], correct:0, explanation:"Double-insulated tools have two independent insulation layers and do not require earthing."},
        {question:"Can you use damaged plugs?", options:["Yes","Never"], correct:1, explanation:"Damaged plugs must be replaced immediately."},
        {question:"Electrical apparatus must be examined?", options:["Annually","Regularly as per plan"], correct:1, explanation:"Statutory examinations follow schedules in the COP."},
        {question:"What is a 'ground fault'?", options:["Normal","Leakage to earth"], correct:1, explanation:"Ground fault is unintended current flow to earth, detected by earth leakage relays."},
        {question:"All electrical work requires?", options:["Nothing","Risk assessment"], correct:1, explanation:"Formal risk assessment is mandatory before any electrical task."},
        {question:"Who trains electrical workers?", options:["Anyone","Accredited"], correct:1, explanation:"Training must be provided by MQA-accredited providers."},
        {question:"Electrical safety rules are in?", options:["MHSA only","Chapter 3 regulations"], correct:1, explanation:"Detailed electrical regulations are contained in Chapter 3 of the MHSA regulations."}
    ]},
    
    mhsa: {name:"MHSA 1996 REGULATIONS", q: [
        {question:"What is the main purpose of MHSA 1996?", options:["Production","Health and safety of miners"], correct:1, explanation:"The primary objective is to protect the health and safety of persons at mines."},
        {question:"Who must ensure safety at the mine?", options:["Employees","Employer"], correct:1, explanation:"Section 5 places the duty on the employer (owner) to ensure safety."},
        {question:"Can employees refuse dangerous work?", options:["No","Yes, right to leave"], correct:1, explanation:"Section 23 allows employees to withdraw from unsafe areas without fear of dismissal."},
        {question:"Who appoints the mine manager?", options:["Inspector","Employer"], correct:1, explanation:"The employer appoints a competent manager with the required certificate."},
        {question:"What must employer provide for training?", options:["Nothing","Health and safety training"], correct:1, explanation:"Adequate health and safety training must be provided free of charge."},
        {question:"Employees must report?", options:["Production","Unsafe conditions"], correct:1, explanation:"Employees have a duty to report any unsafe situation immediately."},
        {question:"What is a health and safety representative?", options:["Supervisor","Elected employee"], correct:1, explanation:"Health and safety reps are elected by employees in defined areas."},
        {question:"Can employer charge for PPE?", options:["Yes","No"], correct:1, explanation:"PPE must be provided free of charge and maintained by the employer."},
        {question:"What is the role of MHSC?", options:["Production","Advise on health and safety"], correct:1, explanation:"The Mine Health and Safety Council advises the Minister on policy and standards."},
        {question:"Employer must prepare?", options:["Nothing","Code of Practice"], correct:1, explanation:"Codes of Practice must be drawn up for significant risks."},
        {question:"Who conducts inquiries into accidents?", options:["Employer only","Inspector"], correct:1, explanation:"Formal inquiries into serious accidents are presided over by the Inspectorate."},
        {question:"What is tripartite structure?", options:["One party","Government, employer, unions"], correct:1, explanation:"Decisions are made with input from state, employers, and organised labour."},
        {question:"Juveniles underground prohibited under?", options:["18","Specific age"], correct:0, explanation:"Persons under 18 may not work underground."},
        {question:"Employer must conduct?", options:["Risk assessments","Work Hazard Identification"], correct:0, explanation:"Continuous risk assessment is a cornerstone of the Act."},
        {question:"What is mandatory COP for?", options:["All hazards","Significant risks"], correct:1, explanation:"COPs are mandatory for risks identified as significant."},
        {question:"Employees must cooperate with?", options:["Production","Safety duties"], correct:1, explanation:"Employees must cooperate in fulfilling safety obligations."},
        {question:"What is the right to withdraw?", options:["For pay","Dangerous place"], correct:1, explanation:"Employees may leave a workplace they reasonably believe is dangerous."},
        {question:"Who pays health and safety reps?", options:["Union","Employer"], correct:1, explanation:"Reps must be paid normal wages while performing safety duties."},
        {question:"Medical surveillance is?", options:["Optional","Mandatory"], correct:1, explanation:"Mandatory for employees exposed to health hazards."},
        {question:"What is the inspectorate for?", options:["Enforcement","Entitlement"], correct:0, explanation:"The Inspectorate enforces compliance and investigates incidents."},
        {question:"Offences under MHSA can lead to?", options:["Warning","Fines or imprisonment"], correct:1, explanation:"Serious contraventions carry criminal penalties including jail."},
        {question:"Employer must supply?", options:["Tools only","PPE free"], correct:1, explanation:"Suitable PPE must be provided at no cost to employees."},
        {question:"What is occupational hygiene?", options:["Cleaning","Measuring hazards"], correct:1, explanation:"Systematic measurement and control of workplace stressors."},
        {question:"Who establishes MQA?", options:["MHSA","TARP"], correct:0, explanation:"The Mining Qualifications Authority is established under the Act."},
        {question:"Employees must take care of?", options:["Production","Own and others safety"], correct:1, explanation:"Section 22 requires reasonable care for own and fellow workers’ safety."},
        {question:"What is a serious injury?", options:["Minor","Reportable"], correct:1, explanation:"Injuries causing unconsciousness, amputation, or likely permanent disability."},
        {question:"Employer must investigate?", options:["All incidents","Accidents"], correct:1, explanation:"All reportable accidents and dangerous occurrences must be investigated."},
        {question:"What is the annual report for?", options:["Production","Health and safety"], correct:1, explanation:"Annual report to the Inspectorate on health and safety performance."},
        {question:"No discrimination for?", options:["Reporting hazards","Leaving early"], correct:0, explanation:"Protection against victimisation for raising safety concerns."},
        {question:"What is a refuge bay?", options:["Rest area","Emergency shelter"], correct:1, explanation:"Permanent place of safety in case of fire or irrespirable atmosphere."},
        {question:"Ventilation is regulated under?", options:["MHSA","TARP"], correct:0, explanation:"Detailed ventilation requirements are in Chapter 8 of the regulations."},
        {question:"Who approves plans?", options:["Manager","Inspector"], correct:1, explanation:"Significant mine plans must be approved by the Principal Inspector."},
        {question:"What is lead exposure limit?", options:["None","Regulated"], correct:1, explanation:"Lead in air and blood levels are strictly regulated."},
        {question:"Noise limits are?", options:["100 dB","Regulated"], correct:1, explanation:"Maximum 85 dB(A) 8-hour exposure; higher requires specific controls."},
        {question:"What is the duty of CEO?", options:["None","Overall responsibility"], correct:1, explanation:"Section 2A places ultimate responsibility on the CEO."},
        {question:"Health and safety committees are?", options:["Optional","Mandatory"], correct:1, explanation:"Required at mines with more than 20 employees."},
        {question:"What is exit from mine?", options:["One way","Multiple"], correct:1, explanation:"Every underground mine must have at least two separate exits."},
        {question:"Emergency procedures must be?", options:["Written","Practiced"], correct:1, explanation:"Written procedures must be regularly practiced through drills."},
        {question:"Who can stop operations?", options:["Only manager","Inspector"], correct:1, explanation:"Inspectors have the power to halt dangerous operations."},
        {question:"What is hazardous substance?", options:["All chemicals","Defined"], correct:1, explanation:"Substances listed or meeting criteria in the Hazardous Chemical Substances Regulations."},
        {question:"Training records must be kept?", options:["No","Yes"], correct:1, explanation:"Records of all safety training must be maintained."},
        {question:"What is the role of unions?", options:["Production","Safety input"], correct:1, explanation:"Unions appoint members to the MHSC and safety committees."},
        {question:"MHSA applies to?", options:["Surface only","All mines"], correct:1, explanation:"Applies to all mines, works, and machinery as defined."},
        {question:"What is risk management?", options:["Optional","Mandatory"], correct:1, explanation:"Continuous identification, assessment, and control of risks."},
        {question:"Employees must use?", options:["Tools","PPE correctly"], correct:1, explanation:"Employees must use provided PPE and follow safe procedures."},
        {question:"What is investigation report?", options:["Internal","Submitted to inspector"], correct:1, explanation:"Formal accident investigation reports must be submitted to the DMRE."},
        {question:"Penalties for non-compliance?", options:["Minor","Severe"], correct:1, explanation:"Contraventions can result in fines up to R1 million or imprisonment."},
        {question:"What is continuous risk assessment?", options:["Once","Ongoing"], correct:1, explanation:"Risk assessment is a dynamic process that must be repeated regularly."},
        {question:"Employer must monitor?", options:["Production","Health"], correct:1, explanation:"Occupational health monitoring for noise, dust, etc. is mandatory."},
        {question:"What is the MHSA objective?", options:["Profit","Zero harm"], correct:1, explanation:"The ultimate goal is the elimination of fatalities and harm."},
        {question:"Who chairs health and safety committee?", options:["Manager","Elected chairperson"], correct:1, explanation:"Alternating employer and employee representatives."}
    ]},

    
    tmm: {name:"TRACKLESS MOBILE MACHINERY", q: [
        {question:"What is TMM?", options:["Any vehicle","Trackless Mobile Machinery"], correct:1, explanation:"TMM refers to all self-propelled mobile machines without tracks used underground."},
        {question:"Who may operate TMM?", options:["Anyone trained","Only competent operator"], correct:1, explanation:"Only operators holding valid competency certificates may operate TMM."},
        {question:"What is a 'collision avoidance system'?", options:["Optional","Mandatory on new TMM"], correct:1, explanation:"Collision avoidance/proximity detection systems are mandatory on new and retrofitted machines."},
        {question:"Can you reverse without guide?", options:["Yes","Only with camera"], correct:1, explanation:"Reversing requires functional reverse camera or a banksman/guide."},
        {question:"What is a 'proximity detection'?", options:["Radar","Personnel warning"], correct:1, explanation:"PDS warns or intervenes when personnel enter dangerous zones around TMM."},
        {question:"Who checks TMM daily?", options:["Anyone","Operator"], correct:1, explanation:"The operator must conduct and record a pre-use inspection daily."},
        {question:"What is a 'rollover protection'?", options:["ROPS","Safety cage"], correct:0, explanation:"ROPS (Roll-Over Protective Structure) protects the operator in case of rollover."},
        {question:"Can you carry passengers?", options:["Yes","Only in designated seats"], correct:1, explanation:"Passengers only in certified passenger compartments or seats."},
        {question:"What is a 'brake test'?", options:["Daily check","Mandatory"], correct:1, explanation:"Service and parking brake performance must be tested daily."},
        {question:"Who approves TMM modifications?", options:["Anyone","Engineering"], correct:1, explanation:"All modifications must be approved by the mine’s engineering authority."},
        {question:"What is a 'load haul dumper'?", options:["LHD","Ore carrier"], correct:0, explanation:"LHD is the common term for load-haul-dump machines."},
        {question:"Can you exceed speed limit?", options:["Yes","Never"], correct:1, explanation:"Speed limits are set based on roadway conditions and must never be exceeded."},
        {question:"What is a 'traffic management plan'?", options:["Map","Legal requirement"], correct:1, explanation:"A formal traffic management plan is mandatory under the TMM regulations."},
        {question:"Who trains TMM operators?", options:["Anyone","Only accredited"], correct:1, explanation:"Training must be conducted by MQA-accredited training providers."},
        {question:"What is a 'derailment'?", options:["Accident","Off road"], correct:0, explanation:"When a TMM leaves the designated roadway."},
        {question:"Can you park on incline?", options:["Yes","Only with chocks"], correct:1, explanation:"Wheels must be chocked and brake engaged on inclines."},
        {question:"What is a 'light vehicle'?", options:["Bakkie","Underground utility"], correct:1, explanation:"Light diesel or battery utility vehicles used underground."},
        {question:"Who checks TMM lights?", options:["Anyone","Operator"], correct:1, explanation:"Operator must verify all lights are functional during pre-use check."},
        {question:"What is a 'fatigue monitor'?", options:["Camera","Driver alertness"], correct:1, explanation:"Systems monitor operator eye closure and head position to detect fatigue."},
        {question:"Can you use phone while driving?", options:["Yes","Never"], correct:1, explanation:"Hand-held communication while operating TMM is prohibited."},
        {question:"What is a 'TMM register'?", options:["List","All machines"], correct:1, explanation:"A register of all TMM with unique IDs and maintenance records."},
        {question:"Who reports TMM incidents?", options:["Anyone","Operator"], correct:0, explanation:"All persons witnessing an incident must report it immediately."},
        {question:"What is a 'service brake'?", options:["Main brake","Emergency brake"], correct:0, explanation:"The service brake is the primary foot brake for normal stopping."},
        {question:"Can you modify TMM?", options:["Yes","Only with approval"], correct:1, explanation:"Modifications require engineering approval and risk assessment."},
        {question:"What is a 'TMM code of practice'?", options:["Guideline","Legal document"], correct:1, explanation:"The TMM COP is a mandatory standard under MHSA Chapter 8."},
        {question:"What is 'level 9 intervention'?", options:["Warning","Automatic stop"], correct:1, explanation:"Highest level PDS intervention stops machine."},
        {question:"TMM maintenance by?", options:["Operator","Qualified mechanics"], correct:1, explanation:"Only competent persons may perform maintenance."}
    ]},
    winders: {name:"WINDERS & HOISTING SYSTEMS", q: [
        {question:"Who may operate a mine winder?", options:["Any driver","Only competent winder driver"], correct:1, explanation:"Only persons holding a valid winder driver certificate of competency may operate."},
        {question:"What is the emergency stop signal?", options:["3 bells","7 bells repeated"], correct:1, explanation:"Seven bells repeated is the universal emergency stop signal."},
        {question:"What is a 'double drum winder'?", options:["Two ropes","Two drums"], correct:1, explanation:"Double drum winders use two drums for balance rope systems."},
        {question:"Who checks the rope condition daily?", options:["Anyone","Only winder driver"], correct:1, explanation:"The winder driver must perform and record daily rope inspections."},
        {question:"What is a 'lily controller'?", options:["Speed control","Safety device"], correct:1, explanation:"The lily controller limits speed and prevents over-wind."},
        {question:"Can you ride the kibble?", options:["Yes","Only authorized personnel"], correct:1, explanation:"Only authorised persons with proper training may ride material conveyances."},
        {question:"What is a 'safety catch'?", options:["Brake","Emergency arrestor"], correct:1, explanation:"Safety catches arrest the conveyance in case of over-wind."},
        {question:"Who approves winder modifications?", options:["Shift boss","Mechanical Engineer"], correct:1, explanation:"Modifications require approval by the appointed engineer (16.1)."},
        {question:"What is a 'rope test'?", options:["Pull test","Non-destructive"], correct:1, explanation:"Regular electromagnetic non-destructive testing plus sample destructive tests."},
        {question:"Can you overload the cage?", options:["Yes","Never"], correct:1, explanation:"Overloading compromises braking and rope safety factors."},
        {question:"What is a 'headgear'?", options:["Helmet","Shaft top structure"], correct:1, explanation:"The headgear/sheave wheel structure at the top of the shaft."},
        {question:"Who checks brakes before shift?", options:["Anyone","Winder driver"], correct:1, explanation:"The driver must perform brake tests before commencing winding."},
        {question:"What is a 'suicide circuit'?", options:["Emergency stop","Field reversal"], correct:1, explanation:"Direct field reversal for emergency dynamic braking."},
        {question:"Can you talk on phone in winder house?", options:["Yes","Never"], correct:1, explanation:"No unauthorised communication to avoid distraction during critical operations."},
        {question:"What is a 'depth indicator'?", options:["Gauge","Position display"], correct:1, explanation:"Shows exact position of the conveyance in the shaft."},
        {question:"Who records winder logbook?", options:["Anyone","Only driver"], correct:1, explanation:"The winder driver must complete all statutory entries."},
        {question:"What is a 'slack rope'?", options:["Normal","Dangerous condition"], correct:1, explanation:"Slack rope can cause rope slip or derailment on drums."},
        {question:"Can you wind during storm?", options:["Yes","Only if safe"], correct:1, explanation:"Winding must stop during electrical storms to prevent lightning damage."},
        {question:"What is a 'cage gate interlock'?", options:["Safety switch","Prevents movement"], correct:1, explanation:"Interlocks prevent winding unless all gates are closed."},
        {question:"Who tests emergency brakes?", options:["Anyone","Only weekly by driver"], correct:1, explanation:"Weekly emergency brake drop tests are mandatory."},
        {question:"What is a 'winder house'?", options:["Office","Control room"], correct:1, explanation:"The secure control room housing winder controls and driver."},
        {question:"Can you leave winder unattended?", options:["Yes","Never"], correct:1, explanation:"The winder must never be left unattended while energised."},
        {question:"What is a 'drum brake'?", options:["Main brake","Emergency brake"], correct:0, explanation:"Mechanical brakes applied directly to the drum."},
        {question:"Who calibrates depth indicator?", options:["Anyone","Only specialist"], correct:1, explanation:"Calibration is done by competent instrumentation personnel."},
        {question:"What is a 'man-winding'?", options:["Material only","Personnel transport"], correct:1, explanation:"Winding of persons requires higher safety factors and controls."},
        {question:"What is 'overwind prevention'?", options:["Speed limit","Safety devices"], correct:1, explanation:"Multiple layers of protection including lily controller."},
        {question:"Winder driver medicals?", options:["Annual","Every 6 months"], correct:1, explanation:"Frequent medical examinations required."}
    ]},
    seismicity: {name:"SEISMICITY & ROCKBURSTS", q: [
        {question:"Primary control for rockbursts?", options:["Mining rate","Support systems and sequencing"], correct:1, explanation:"Engineered support and controlled mining sequences are primary controls."},
        {question:"Who monitors seismic activity?", options:["Shift boss","Seismic department"], correct:1, explanation:"Dedicated seismic monitoring with real-time analysis."},
        {question:"Re-entry after seismic event?", options:["Immediately","After risk assessment"], correct:1, explanation:"Re-entry only after ground stability confirmed by rock engineer."},
        {question:"What is 'bracket pillar'?", options:["Support","Seismic energy absorption"], correct:1, explanation:"Designed pillars to absorb and contain seismic energy."},
        {question:"Seismic warning triggers?", options:["Noise","Micro-seismic events"], correct:1, explanation:"Pre-defined magnitude thresholds trigger TARP responses."},
        {question:"Who designs destress blasting?", options:["Blaster","Rock engineer"], correct:1, explanation:"Destress patterns designed by geotechnical specialists."},
        {question:"Netting for rockburst protection?", options:["Optional","Mandatory in high-risk"], correct:1, explanation:"Dynamic support with energy-absorbing nets and bolts."},
        {question:"Seismic data recording?", options:["Voluntary","Mandatory"], correct:1, explanation:"Continuous seismic monitoring and data retention required."},
        {question:"Who declares area safe post-event?", options:["Supervisor","Rock engineer"], correct:1, explanation:"Only rock engineer may declare area safe after inspection."},
        {question:"Rockburst COP required?", options:["No","Yes, mandatory"], correct:1, explanation:"Specific code of practice for seismic risk management."},
        {question:"What is 'preconditioning'?", options:["Blasting","Stress reduction"], correct:0, explanation:"Controlled blasting to reduce stored energy."},
        {question:"Seismic hazard assessment?", options:["Once","Continuous"], correct:1, explanation:"Ongoing monitoring and modelling."},
        {question:"What is 'energy release rate'?", options:["Production","Seismic risk indicator"], correct:1, explanation:"Measures potential seismic energy per tonne mined."},
        {question:"Who interprets seismic data?", options:["Anyone","Seismologist"], correct:1, explanation:"Qualified personnel only."},
        {question:"Support for seismic areas?", options:["Standard","Dynamic capable"], correct:1, explanation:"Tendons and mesh that can absorb energy."},
        {question:"What is 'backfill' role?", options:["Waste","Seismic control"], correct:1, explanation:"Filled stopes reduce seismic risk."},
        {question:"Seismic training for workers?", options:["Optional","Mandatory"], correct:1, explanation:"All personnel trained in response procedures."},
        {question:"Who updates seismic plan?", options:["Manager","Rock engineer"], correct:1, explanation:"Regular review based on new data."},
        {question:"What is 'time-dependent behaviour'?", options:["Immediate","Delayed rock failure"], correct:1, explanation:"Rock can fail hours or days after stress change."},
        {question:"Seismic monitoring network?", options:["Few sensors","Dense array"], correct:1, explanation:"Comprehensive coverage required."},
        {question:"What is 'local magnitude'?", options:["Global","Mine-specific scale"], correct:1, explanation:"Calibrated for local conditions."},
        {question:"Who responds to seismic alert?", options:["Anyone","Designated team"], correct:1, explanation:"Coordinated response per TARP."},
        {question:"Seismic risk in pillar extraction?", options:["Low","High"], correct:1, explanation:"Highest risk during final pillar recovery."},
        {question:"What is 'stope closure'?", options:["Normal","Seismic indicator"], correct:1, explanation:"Measured convergence indicates stress."},
        {question:"Who approves mining sequence?", options:["Manager","Rock engineer"], correct:1, explanation:"Seismically safe sequence mandatory."},
        {question:"Seismic event reporting?", options:["Next day","Immediate"], correct:1, explanation:"All events above threshold reported immediately."},
        {question:"What is 'yield pillar'?", options:["Solid","Designed to crush"], correct:1, explanation:"Controlled failure to absorb energy."}
    ]},
    blasting: {name:"BLASTING & EXPLOSIVES", q: [
        {question:"Who may handle explosives?", options:["Any miner","Only competent blaster"], correct:1, explanation:"Only persons holding a valid blasting certificate may handle explosives."},
        {question:"Re-entry time after blasting?", options:["15 min","30 min minimum"], correct:1, explanation:"Minimum 30 minutes for ventilation clearance and fume dissipation."},
        {question:"Who guards blast site?", options:["Anyone","Appointed sentries"], correct:1, explanation:"Trained sentries control access during charging and guarding."},
        {question:"Misfire procedure?", options:["Wait 10 min","Wait 30 min + report"], correct:1, explanation:"30-minute wait, then competent person investigates."},
        {question:"Explosives transport?", options:["Any vehicle","Designated explosive vehicle"], correct:1, explanation:"Dedicated, marked vehicles with fire suppression."},
        {question:"Who approves blast design?", options:["Blaster","Rock engineer"], correct:1, explanation:"Blast patterns require rock engineer approval."},
        {question:"Initiation system?", options:["Fuse","Electronic or shock tube"], correct:1, explanation:"Safety fuse prohibited underground; non-electronic preferred."},
        {question:"Blast clearance radius?", options:["100 m","500 m minimum"], correct:1, explanation:"Minimum 500 m clearance for underground blasts."},
        {question:"Who records blast details?", options:["Operator","Blasting officer"], correct:1, explanation:"Full details in statutory blast log."},
        {question:"Secondary breaking method?", options:["Any","Controlled with explosives"], correct:1, explanation:"Secondary breaking requires specific procedures."},
        {question:"What is 'priming'?", options:["Charging","Inserting detonator"], correct:1, explanation:"Placing initiator in cartridge."},
        {question:"Who issues blasting permit?", options:["Blaster","Shift boss"], correct:1, explanation:"Formal permit system required."},
        {question:"Explosives storage?", options:["Any","Approved magazine"], correct:1, explanation:"Secure, ventilated magazines only."},
        {question:"What is 'sleeping charges'?", options:["Normal","Prohibited"], correct:1, explanation:"Leaving charged holes overnight forbidden."},
        {question:"Who examines face post-blast?", options:["Anyone","Competent person"], correct:1, explanation:"Thorough examination for misfires and sockets."},
        {question:"Blast fume monitoring?", options:["Optional","Mandatory"], correct:1, explanation:"Gas testing before re-entry."},
        {question:"What is 'stemming'?", options:["Packing","Material in hole"], correct:1, explanation:"Material to confine explosion."},
        {question:"Who trains blasters?", options:["Anyone","Accredited"], correct:1, explanation:"MQA-accredited training."},
        {question:"Blasting during shift change?", options:["Allowed","Prohibited"], correct:1, explanation:"To avoid personnel movement."},
        {question:"What is 'cut-off'?", options:["Design","Unintended early detonation"], correct:1, explanation:"Prevention critical."},
        {question:"Who accounts for explosives?", options:["Blaster","Magazine master"], correct:1, explanation:"Strict stock control."},
        {question:"Blast warning signal?", options:["Any","Standard siren"], correct:1, explanation:"Clear audible warning."},
        {question:"What is 'shock tube'?", options:["Electric","Non-electric initiation"], correct:1, explanation:"Safer in stray current areas."},
        {question:"Who investigates misfires?", options:["Blaster","Senior blaster"], correct:1, explanation:"Formal procedure."},
        {question:"Blasting COP required?", options:["No","Yes"], correct:1, explanation:"Mandatory code of practice."},
        {question:"What is 'flyrock control'?", options:["Optional","Critical"], correct:1, explanation:"Stemming and guarding essential."}
    ]},
    evacuation: {name:"EMERGENCY EVACUATION", q: [
        {question:"Primary evacuation signal?", options:["Siren","Stench gas"], correct:1, explanation:"Stench gas release is the primary underground evacuation trigger."},
        {question:"Who activates evacuation?", options:["Anyone","Control room or manager"], correct:1, explanation:"Only authorised personnel may initiate full evacuation."},
        {question:"Evacuation route marking?", options:["Optional","Reflective signage"], correct:1, explanation:"Clear, illuminated primary and secondary routes."},
        {question:"SCSR cache locations?", options:["Work areas","Every 500 m"], correct:0, explanation:"Additional SCSRs cached along escape routes."},
        {question:"Who accounts for personnel?", options:["Supervisor","Section leaders"], correct:1, explanation:"Roll call at refuge chambers and surface assembly points."},
        {question:"Evacuation drill frequency?", options:["Annually","Quarterly"], correct:1, explanation:"Full evacuation drills at least quarterly."},
        {question:"Self-escape philosophy?", options:["Wait for rescue","Immediate self-escape"], correct:1, explanation:"Personnel trained to self-escape using SCSRs."},
        {question:"Refuge chamber duration?", options:["24 hours","36 hours minimum"], correct:1, explanation:"Refuge chambers designed for 36-hour occupation."},
        {question:"Who updates evacuation plan?", options:["Safety officer","Emergency team"], correct:0, explanation:"Plan reviewed after incidents or layout changes."},
        {question:"Communication during evacuation?", options:["Radio","Tagging system"], correct:1, explanation:"Pedestrian tagging and radio check-in protocols."},
        {question:"What is 'secondary escape route'?", options:["Optional","Mandatory"], correct:1, explanation:"Alternative route in case primary blocked."},
        {question:"Who trains in evacuation?", options:["Anyone","Competent person"], correct:1, explanation:"Regular training for all personnel."},
        {question:"Assembly point marking?", options:["Optional","Clear signage"], correct:1, explanation:"Designated surface muster points."},
        {question:"What is 'PPE for evacuation'?", options:["Normal","SCSR mandatory"], correct:1, explanation:"Self-contained self-rescuer carried at all times."},
        {question:"Who declares all clear?", options:["Supervisor","Incident commander"], correct:1, explanation:"Formal all-clear after headcount."},
        {question:"Evacuation during shift change?", options:["Normal","Special procedure"], correct:1, explanation:"Coordinated to avoid confusion."},
        {question:"What is 'refuge chamber entry'?", options:["Last resort","When escape impossible"], correct:0, explanation:"Used when surface escape not possible."},
        {question:"Who maintains refuge chambers?", options:["Anyone","Dedicated team"], correct:1, explanation:"Regular checks and servicing."},
        {question:"Evacuation plan review?", options:["Annual","After incidents"], correct:1, explanation:"Updated based on lessons learned."},
        {question:"What is 'stench gas system'?", options:["Optional","Mandatory"], correct:1, explanation:"Primary warning system."},
        {question:"Who coordinates rescue?", options:["Manager","Proto team"], correct:1, explanation:"Professional rescue brigade."},
        {question:"Evacuation signage illumination?", options:["Optional","Self-luminous"], correct:1, explanation:"Visible in smoke and power failure."},
        {question:"What is 'tagging system'?", options:["Optional","Mandatory"], correct:1, explanation:"Personnel accountability system."},
        {question:"Who drills evacuation?", options:["Safety","All sections"], correct:1, explanation:"Section-specific and full mine drills."},
        {question:"Emergency evacuation COP?", options:["No","Yes"], correct:1, explanation:"Mandatory detailed plan."},
        {question:"What is 'safe haven'?", options:["Refuge","Alternative term"], correct:0, explanation:"Same as refuge chamber."}
    ]},


fire: {name:"FIRE UNDERGROUND", q: [
        {question:"First action on discovering fire?", options:["Fight fire","Report and evacuate"], correct:1, explanation:"Immediate reporting via radio and activation of evacuation if required."},
        {question:"Who leads fire fighting?", options:["Anyone","Proto team"], correct:1, explanation:"Trained proto (rescue) teams handle underground fire response."},
        {question:"Fire suppression on vehicles?", options:["Optional","Mandatory"], correct:1, explanation:"All diesel vehicles require automatic fire suppression systems."},
        {question:"What is 'fire round'?", options:["Inspection","Designated fire patrol"], correct:1, explanation:"Regular fire risk inspections by appointed persons."},
        {question:"Conveyor belt fire protection?", options:["None","CO sensors and suppression"], correct:1, explanation:"CO monitoring and water deluge systems."},
        {question:"Who declares fire emergency?", options:["Supervisor","Mine manager"], correct:1, explanation:"Incident command structure activated by manager."},
        {question:"Refuge chamber fire rating?", options:["1 hour","4 hours"], correct:1, explanation:"Chambers must withstand external fire for minimum 4 hours."},
        {question:"Fire extinguisher inspection?", options:["Monthly","By competent person"], correct:0, explanation:"Monthly checks recorded in fire equipment register."},
        {question:"Hydraulic fluid requirement?", options:["Water-based","Fire-resistant"], correct:1, explanation:"Only fire-resistant fluids permitted underground."},
        {question:"Post-fire re-entry?", options:["Immediately","After air quality clearance"], correct:1, explanation:"Re-entry only after full atmospheric testing and structural assessment."},
        {question:"What is primary fire risk underground?", options:["Electrical","Diesel equipment"], correct:1, explanation:"Diesel-powered machinery is the leading cause of underground fires."},
        {question:"Smoking underground?", options:["Allowed in areas","Strictly prohibited"], correct:1, explanation:"No smoking or open flames permitted underground."},
        {question:"Fire door purpose?", options:["Privacy","Contain fire and smoke"], correct:1, explanation:"Fire doors prevent spread of fire and toxic gases."},
        {question:"Who trains fire fighting?", options:["Anyone","Proto team"], correct:1, explanation:"Specialised training for rescue brigade."},
        {question:"What is 'fire break'?", options:["Gap","Sealed area"], correct:1, explanation:"Bulkhead to isolate fire."},
        {question:"Can you use foam on oil fire?", options:["Yes","Only Class B"], correct:1, explanation:"Specific foam for hydrocarbon fires."},
        {question:"What is 'fire load'?", options:["Heat","Fuel amount"], correct:1, explanation:"Quantity of combustible material."},
        {question:"Who records fire incidents?", options:["Anyone","Safety department"], correct:1, explanation:"Formal investigation required."},
        {question:"What is 'fire drill'?", options:["Practice","Mandatory monthly"], correct:1, explanation:"Regular fire response exercises."},
        {question:"Fire detection systems?", options:["Optional","Mandatory in key areas"], correct:1, explanation:"Early warning critical."},
        {question:"What is 'hot work permit'?", options:["Any work","For welding/cutting"], correct:1, explanation:"Hot work (welding, cutting, grinding) requires a formal hot work permit, risk assessment, and fire watch."},
        {question:"Who approves fire equipment?", options:["Manager","Safety officer"], correct:1, explanation:"Firefighting equipment must be approved and maintained by competent safety personnel."},
        {question:"Fire refuge sealing?", options:["Manual","Automatic"], correct:0, explanation:"Many modern refuge chambers have automatic sealing and positive pressure systems."},
        {question:"What is 'smoke tube test'?", options:["Ventilation","Fire indicator"], correct:1, explanation:"Smoke tubes are used for early detection of ventilation changes and possible fire."},
        {question:"Who maintains fire pumps?", options:["Anyone","Engineering"], correct:1, explanation:"Fire pumps and water supply systems are maintained by the engineering department."},
        {question:"Fire COP required?", options:["No","Yes"], correct:1, explanation:"A mandatory Code of Practice for fire risk management is required under MHSA."}
    ]}



};


// ──────────────────────────────────────────────────────────────────────────────
// STATE & UTILITIES
// ──────────────────────────────────────────────────────────────────────────────

let scores = JSON.parse(localStorage.getItem('miningScores') || '{}');
let currentModule = null;
let currentQuiz = null;
let questionIndex = 0;
let correctAnswers = 0;
let quizStartTime = 0;

// Simple shuffle function (Fisher-Yates)
function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

// ──────────────────────────────────────────────────────────────────────────────
// DOM ELEMENTS
// ──────────────────────────────────────────────────────────────────────────────

const els = {
    grid: document.getElementById('moduleGrid'),
    search: document.getElementById('searchInput'),
    completedCount: document.getElementById('completedCount'),
    overallPass: document.getElementById('overallPass'),
    moduleTitle: document.getElementById('moduleTitle'),
    videoPlayer: document.getElementById('videoPlayer'),
    questionText: document.getElementById('questionText'),
    optionsContainer: document.getElementById('optionsContainer'),
    feedback: document.getElementById('feedback'),
    nextBtn: document.getElementById('nextBtn'),
    resultTitle: document.getElementById('resultTitle'),
    progressBar: document.getElementById('progressBar'),
    scorePercent: document.getElementById('scorePercent'),
    correctCount: document.getElementById('correctCount'),
    timeDisplay: document.getElementById('timeDisplay'),
    passMessage: document.getElementById('passMessage'),
    dashCompleted: document.getElementById('dashCompleted'),
    dashPassRate: document.getElementById('dashPassRate'),
    dashCertificates: document.getElementById('dashCertificates'),
    completedModulesList: document.getElementById('completedModulesList')
};

// ──────────────────────────────────────────────────────────────────────────────
// CORE FUNCTIONS
// ──────────────────────────────────────────────────────────────────────────────

function hideAll() {
    // Added #communityScreen to the list
    document.querySelectorAll('#welcomeScreen, #moduleView, #videoScreen, #quizScreen, #resultsScreen, #communityScreen, #dashboardScreen')
        .forEach(el => el.classList.add('d-none'));
}

function showScreen(id) {
    hideAll();
    document.getElementById(id).classList.remove('d-none');
    
    // Forcefully stop & unload YouTube video when leaving the video screen
    if (id !== 'videoScreen') {
        els.videoPlayer.src = '';
    }
}

function updateProgress() {
    const done = Object.keys(scores).length;
    const passed = Object.values(scores).filter(v => v?.passed).length;
    const rate = done ? Math.round((passed / done) * 100) : 0;

    els.completedCount.textContent = done;
    els.overallPass.textContent = rate + '%';

    els.dashCompleted.textContent = `${done}/24`;
    els.dashPassRate.textContent = rate + '%';
    els.dashCertificates.textContent = passed;
}

function renderModules(filter = 'all', term = '') {
    els.grid.innerHTML = '';

    Object.entries(moduleNames).forEach(([key, name]) => {
        if (term && !name.toLowerCase().includes(term.toLowerCase())) return;
        if (filter === 'basic' && advancedModules.includes(key)) return;
        if (filter === 'advanced' && !advancedModules.includes(key)) return;

        const card = document.createElement('div');
        card.className = `module-card ${advancedModules.includes(key) ? 'advanced' : ''}`;
        card.dataset.module = key;

        const icon = moduleIcons[key] || 'bi-shield-check';

        card.innerHTML = `
            <div class="card-body">
                <div class="icon-wrapper">
                    <i class="bi ${icon}"></i>
                </div>
                <h6 class="module-name">${name}</h6>
                ${scores[key] ? `
                    <span class="progress-badge ${scores[key].passed ? 'bg-success-soft' : 'bg-warning-soft'}">
                        ${scores[key].percentage}%
                    </span>
                ` : ''}
            </div>
        `;

        card.addEventListener('click', () => loadModule(key));
        els.grid.appendChild(card);
    });

    updateProgress();
}

function loadModule(moduleKey) {
    currentModule = moduleKey;
    const isMobile = window.innerWidth < 992;
    if (moduleKey === 'community_chat') {
        showScreen('communityScreen');
    } else {
        els.moduleTitle.textContent = moduleNames[moduleKey];
        showScreen('moduleView');
    }
    if (isMobile) {
        document.getElementById('sidebar').style.display = 'none';
        document.getElementById('content-area').style.display = 'block';
    }
}


function startVideo() {
    if (!currentModule || !videos[currentModule]) return;
    
    // Add autoplay=1 and make sure it's not muted (so sound plays immediately)
    const videoUrl = videos[currentModule] + "?autoplay=1&rel=0&mute=0&enablejsapi=1";
    
    els.videoPlayer.src = videoUrl;
    showScreen('videoScreen');
    
    // Optional: Try to force play in case browser blocks autoplay
    els.videoPlayer.addEventListener('load', () => {
        els.videoPlayer.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
    }, { once: true });
}

function startQuiz() {
    if (!currentModule || !sampleQuizzes[currentModule]) return;

    currentQuiz = sampleQuizzes[currentModule].q; // array of questions
    questionIndex = 0;
    correctAnswers = 0;
    quizStartTime = Date.now();

    showQuestion();
    showScreen('quizScreen');
}

function showQuestion() {
    if (questionIndex >= currentQuiz.length) {
        finishQuiz();
        return;
    }

    const q = currentQuiz[questionIndex];

    // Shuffle the options
    const shuffledOptions = shuffleArray(q.options);
    // Find new position of correct answer after shuffle
    const correctIndexAfterShuffle = shuffledOptions.indexOf(q.options[q.correct]);

    els.questionText.textContent = q.question;
    els.optionsContainer.innerHTML = '';

    shuffledOptions.forEach((optionText, idx) => {
        const div = document.createElement('div');
        div.className = 'quiz-option col-12';
        div.textContent = optionText;
        div.dataset.index = idx;
        div.addEventListener('click', () => selectAnswer(idx, correctIndexAfterShuffle, q));
        els.optionsContainer.appendChild(div);
    });

    els.feedback.textContent = '';
    els.feedback.className = 'mt-4 text-center fw-bold fs-5 min-vh-50 d-flex align-items-center justify-content-center';
    els.nextBtn.classList.add('d-none');
}

function selectAnswer(selectedIndex, correctIndex, questionData) {
    const options = els.optionsContainer.querySelectorAll('.quiz-option');

    options.forEach((opt, i) => {
        opt.style.pointerEvents = 'none';
        if (i === correctIndex) {
            opt.classList.add('bg-success', 'text-white');
        }
        if (i === selectedIndex) {
            if (i === correctIndex) {
                opt.classList.add('bg-success', 'text-white');
                correctAnswers++;
                els.feedback.textContent = "Correct! ✓";
                els.feedback.classList.add('text-success');
            } else {
                opt.classList.add('bg-danger', 'text-white');
                els.feedback.innerHTML = `Incorrect.<br>The correct answer was: <strong>"${questionData.options[questionData.correct]}"</strong><br><br>${questionData.explanation}`;
                els.feedback.classList.add('text-danger');
            }
        }
    });

    els.nextBtn.classList.remove('d-none');
}

function nextQuestion() {
    questionIndex++;
    showQuestion();
}

function finishQuiz() {
    const timeTaken = Math.floor((Date.now() - quizStartTime) / 1000);
    const minutes = Math.floor(timeTaken / 60);
    const seconds = timeTaken % 60;
    const totalQuestions = currentQuiz.length;
    const percentage = Math.round((correctAnswers / totalQuestions) * 100);
    const passed = percentage >= 80;

    scores[currentModule] = {
        percentage,
        passed,
        date: new Date().toISOString(),
        correct: correctAnswers,
        total: totalQuestions,
        time: timeTaken
    };

    localStorage.setItem('miningScores', JSON.stringify(scores));

    els.resultTitle.textContent = passed ? "Congratulations!" : "Assessment Complete";
    els.progressBar.style.width = percentage + '%';
    els.progressBar.textContent = percentage + '%';
    els.scorePercent.textContent = percentage + '%';
    els.correctCount.textContent = `${correctAnswers}/${totalQuestions}`;
    els.timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2,'0')}`;

    els.passMessage.textContent = passed
        ? "You have PASSED this module (≥80%)"
        : "You did not reach the required 80% — please review and retake";
    els.passMessage.className = passed
        ? 'lead fw-bold text-success mb-4'
        : 'lead fw-bold text-danger mb-4';

    showScreen('resultsScreen');
    updateProgress();
}

// ──────────────────────────────────────────────────────────────────────────────
// EVENT LISTENERS
// ──────────────────────────────────────────────────────────────────────────────

document.getElementById('watchVideo')?.addEventListener('click', startVideo);
document.getElementById('startQuiz')?.addEventListener('click', startQuiz);
document.getElementById('nextBtn')?.addEventListener('click', nextQuestion);

document.getElementById('dashboardBtn')?.addEventListener('click', () => {
    els.completedModulesList.innerHTML = '';
    Object.entries(scores).forEach(([key, data]) => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `
            ${moduleNames[key]}
            <span class="badge ${data.passed ? 'bg-success' : 'bg-danger'} rounded-pill">
                ${data.percentage}%
            </span>
        `;
        els.completedModulesList.appendChild(li);
    });
    showScreen('dashboardScreen');
});

els.search.addEventListener('input', e => {
    renderModules('all', e.target.value.trim());
});

document.querySelectorAll('[data-filter]').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderModules(btn.dataset.filter, els.search.value.trim());
    });
});

// Go back to module selection list (especially important on mobile)
// Go back to module selection list (especially important on mobile)
function backToModules() {
    const isMobile = window.innerWidth < 992;

    // Always show sidebar/module grid on mobile
    if (isMobile) {
        document.getElementById('sidebar').style.display = 'block';
        document.getElementById('content-area').style.display = 'none';
    }

    // Hide all content screens
    hideAll();

    // Show welcome + module grid (which is inside sidebar)
    // We don't need to show welcomeScreen explicitly on mobile
    renderModules(); // refresh the module list just in case

    // On desktop we still show welcome screen
    if (!isMobile) {
        document.getElementById('welcomeScreen').classList.remove('d-none');
    }
}

// Optional: also improve backToModule (when returning from video to module details)
function backToModule() {
    els.videoPlayer.src = ''; // Clear video
    const isMobile = window.innerWidth < 992;

    showScreen('moduleView');

    if (isMobile) {
        // Keep sidebar hidden, stay in content view
        document.getElementById('sidebar').style.display = 'none';
        document.getElementById('content-area').style.display = 'block';
    }
}


function restartQuiz() {
    startQuiz();
}

// ──────────────────────────────────────────────────────────────────────────────
// INITIALIZATION
// ──────────────────────────────────────────────────────────────────────────────

window.addEventListener('DOMContentLoaded', () => {
    renderModules();
    showScreen('welcomeScreen');
});
</script>
</body>
</html>














